"use strict";function _createForOfIteratorHelperLoose(e,t){var r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=_unsupportedIterableToArray2(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray2(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray2(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray2(e,t):void 0}function _arrayLikeToArray2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.COS=t():e.COS=t()}(this,function(){return r={"./index.js":function(e,t,r){r=r("./src/cos.js");e.exports=r},"./lib/base64.js":function(e,t){o=(r={}).Base64,i=function(e){for(var t={},r=0,o=e.length;r<o;r++)t[e.charAt(r)]=r;return t}(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a=String.fromCharCode,s=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=r.btoa?function(e){return r.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,m)},u=function(e){return c(g(e))},l=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=r.atob?function(e){return r.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,v)},p=function(e){return C(d(e))};var r,o,n,i,a,s,c,u,l,d,p,h={VERSION:"2.1.9",atob:d,btoa:c,fromBase64:b,toBase64:y,utob:g,encode:y,encodeURI:function(e){return y(e,!0)},btou:C,decode:b,noConflict:function(){var e=r.Base64;return r.Base64=o,e}};function f(e){var t;return e.length<2?(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t))}function g(e){return e.replace(s,f)}function m(e){var t=[0,2,1][e.length%3],e=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[n.charAt(e>>>18),n.charAt(e>>>12&63),2<=t?"=":n.charAt(e>>>6&63),1<=t?"=":n.charAt(63&e)].join("")}function y(e,t){return t?u(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):u(String(e))}function k(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}}function C(e){return e.replace(l,k)}function v(e){var t=(r=e.length)%4,r=(0<r?i[e.charAt(0)]<<18:0)|(1<r?i[e.charAt(1)]<<12:0)|(2<r?i[e.charAt(2)]<<6:0)|(3<r?i[e.charAt(3)]:0);return(e=[a(r>>>16),a(r>>>8&255),a(255&r)]).length-=[0,0,2,1][t],e.join("")}function b(e){return p(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}e.exports=h},"./lib/crypto.js":function(e,t,C){!function(e){var s,t,c,r,o,n,i,a,u,l,d,p,h,f,g,m=C("./node_modules/@babel/runtime/helpers/typeof.js"),y=(s=Math,u=(h={}).lib={},t=u.Base={extend:function(e){k.prototype=this;var t=new k;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=u.WordArray=t.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(r[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<r.length)for(n=0;n<e;n+=4)t[o+n>>>2]=r[n>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=t.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),y=h.enc={},r=y.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(r,t/2)}},o=y.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],o=0;o<e;o++)r.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(r,t)}},n=y.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},i=u.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=n.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,o=t.sigBytes,n=this.blockSize,i=o/(4*n),i=e?s.ceil(i):s.max((0|i)-this._minBufferSize,0),o=s.min(4*(e=i*n),o);if(e){for(var a=0;a<e;a+=n)this._doProcessBlock(r,a);a=r.splice(0,e),t.sigBytes-=o}return new c.init(a,o)},clone:function(){var e=t.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u.Hasher=i.extend({cfg:t.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){i.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new a.HMAC.init(r,t).finalize(e)}}}),a=h.algo={},h);function k(){}l=(h=(u=y).lib).WordArray,d=h.Hasher,p=[],h=u.algo.SHA1=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r,o=this._hash.words,n=o[0],i=o[1],a=o[2],s=o[3],c=o[4],u=0;u<80;u++)p[u]=u<16?0|e[t+u]:(r=p[u-3]^p[u-8]^p[u-14]^p[u-16])<<1|r>>>31,r=(n<<5|n>>>27)+c+p[u],r=u<20?r+(1518500249+(i&a|~i&s)):u<40?r+(1859775393+(i^a^s)):u<60?r+((i&a|i&s|a&s)-1894007588):r+((i^a^s)-899497514),c=s,s=a,a=i<<30|i>>>2,i=n,n=r;o[0]=o[0]+n|0,o[1]=o[1]+i|0,o[2]=o[2]+a|0,o[3]=o[3]+s|0,o[4]=o[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(64+o>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+o>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}}),u.SHA1=d._createHelper(h),u.HmacSHA1=d._createHmacHelper(h),f=y.enc.Utf8,y.algo.HMAC=y.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=f.parse(t));var r=e.blockSize,o=4*r;(t=t.sigBytes>o?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),n=e.words,i=t.words,a=0;a<r;a++)n[a]^=1549556828,i[a]^=909522486;e.sigBytes=t.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),g=y.lib.WordArray,y.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=this._map,n=(e.clamp(),[]),i=0;i<r;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)n.push(o.charAt(a>>>6*(3-s)&63));var c=o.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){for(var t,r,o=e.length,n=this._map,i=n.charAt(64),a=(i&&-1!=(i=e.indexOf(i))&&(o=i),[]),s=0,c=0;c<o;c++)c%4&&(t=n.indexOf(e.charAt(c-1))<<c%4*2,r=n.indexOf(e.charAt(c))>>>6-c%4*2,a[s>>>2]|=(t|r)<<24-s%4*8,s++);return g.create(a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},"object"===m(e)?e.exports=y:window.CryptoJS=y}.call(this,C("./node_modules/webpack/buildin/module.js")(e))},"./lib/md5.js":function(e,t,y){!function(e){var t=y("./node_modules/@babel/runtime/helpers/typeof.js");function o(r){return function(e,t){return new g(!0).update(e,t)[r]()}}var r,n,i=(a="object"===("undefined"==typeof window?"undefined":t(window)))?window:{},a=!(i=!(a=i.JS_MD5_NO_WINDOW?!1:a)&&"object"===("undefined"==typeof self?"undefined":t(self))?self:i).JS_MD5_NO_COMMON_JS&&"object"===t(e)&&e.exports,s=y("./node_modules/webpack/buildin/amd-options.js"),c=!i.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),l=[128,32768,8388608,-2147483648],d=[0,8,16,24],p=["hex","array","digest","buffer","arrayBuffer","base64"],h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),f=[];function g(e){e?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f,this.buffer8=n):c?(e=new ArrayBuffer(68),this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}c&&(r=new ArrayBuffer(68),n=new Uint8Array(r),f=new Uint32Array(r)),!i.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!c||!i.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===t(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer}),g.prototype.update=function(e,t){if(!this.finalized){for(var r,o,n=0,i=e.length,a=this.blocks,s=this.buffer8;n<i;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),c)for(o=this.start;n<i&&o<64;++n)r=e.charCodeAt(n),t||r<128?s[o++]=r:(r<2048?s[o++]=192|r>>6:(r<55296||57344<=r?s[o++]=224|r>>12:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++n)),s[o++]=240|r>>18,s[o++]=128|r>>12&63),s[o++]=128|r>>6&63),s[o++]=128|63&r);else for(o=this.start;n<i&&o<64;++n)r=e.charCodeAt(n),t||r<128?a[o>>2]|=r<<d[3&o++]:(r<2048?a[o>>2]|=(192|r>>6)<<d[3&o++]:(r<55296||57344<=r?a[o>>2]|=(224|r>>12)<<d[3&o++]:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++n)),a[o>>2]|=(240|r>>18)<<d[3&o++],a[o>>2]|=(128|r>>12&63)<<d[3&o++]),a[o>>2]|=(128|r>>6&63)<<d[3&o++]),a[o>>2]|=(128|63&r)<<d[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,64<=o?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},g.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,(e=this.blocks)[(t=this.lastByteIndex)>>2]|=l[3&t],56<=t&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash())},g.prototype.hash=function(){var e,t,r,o,n,i=this.blocks,a=this.first?((a=((e=((e=i[0]-680876937)<<7|e>>>25)-271733879<<0)^(t=((t=(-271733879^(r=((r=(-1732584194^2004318071&e)+i[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+i[2]-1126478375)<<17|t>>>15)+r<<0)&(r^e))+i[3]-1316259209)<<22|a>>>10)+t<<0:(e=this.h0,a=this.h1,t=this.h2,((a+=((e=((e+=((r=this.h3)^a&(t^r))+i[0]-680876936)<<7|e>>>25)+a<<0)^(t=((t+=(a^(r=((r+=(t^e&(a^t))+i[1]-389564586)<<12|r>>>20)+e<<0)&(e^a))+i[2]+606105819)<<17|t>>>15)+r<<0)&(r^e))+i[3]-1044525330)<<22|a>>>10)+t<<0);a=((a+=((e=((e+=(r^a&(t^r))+i[4]-176418897)<<7|e>>>25)+a<<0)^(t=((t+=(a^(r=((r+=(t^e&(a^t))+i[5]+1200080426)<<12|r>>>20)+e<<0)&(e^a))+i[6]-1473231341)<<17|t>>>15)+r<<0)&(r^e))+i[7]-45705983)<<22|a>>>10)+t<<0,a=((a+=((e=((e+=(r^a&(t^r))+i[8]+1770035416)<<7|e>>>25)+a<<0)^(t=((t+=(a^(r=((r+=(t^e&(a^t))+i[9]-1958414417)<<12|r>>>20)+e<<0)&(e^a))+i[10]-42063)<<17|t>>>15)+r<<0)&(r^e))+i[11]-1990404162)<<22|a>>>10)+t<<0,a=((a+=((e=((e+=(r^a&(t^r))+i[12]+1804603682)<<7|e>>>25)+a<<0)^(t=((t+=(a^(r=((r+=(t^e&(a^t))+i[13]-40341101)<<12|r>>>20)+e<<0)&(e^a))+i[14]-1502002290)<<17|t>>>15)+r<<0)&(r^e))+i[15]+1236535329)<<22|a>>>10)+t<<0,a=((a+=((r=((r+=(a^t&((e=((e+=(t^r&(a^t))+i[1]-165796510)<<5|e>>>27)+a<<0)^a))+i[6]-1069501632)<<9|r>>>23)+e<<0)^e&((t=((t+=(e^a&(r^e))+i[11]+643717713)<<14|t>>>18)+r<<0)^r))+i[0]-373897302)<<20|a>>>12)+t<<0,a=((a+=((r=((r+=(a^t&((e=((e+=(t^r&(a^t))+i[5]-701558691)<<5|e>>>27)+a<<0)^a))+i[10]+38016083)<<9|r>>>23)+e<<0)^e&((t=((t+=(e^a&(r^e))+i[15]-660478335)<<14|t>>>18)+r<<0)^r))+i[4]-405537848)<<20|a>>>12)+t<<0,a=((a+=((r=((r+=(a^t&((e=((e+=(t^r&(a^t))+i[9]+568446438)<<5|e>>>27)+a<<0)^a))+i[14]-1019803690)<<9|r>>>23)+e<<0)^e&((t=((t+=(e^a&(r^e))+i[3]-187363961)<<14|t>>>18)+r<<0)^r))+i[8]+1163531501)<<20|a>>>12)+t<<0,a=((a+=((r=((r+=(a^t&((e=((e+=(t^r&(a^t))+i[13]-1444681467)<<5|e>>>27)+a<<0)^a))+i[2]-51403784)<<9|r>>>23)+e<<0)^e&((t=((t+=(e^a&(r^e))+i[7]+1735328473)<<14|t>>>18)+r<<0)^r))+i[12]-1926607734)<<20|a>>>12)+t<<0,a=((a+=((n=(r=((r+=((o=a^t)^(e=((e+=(o^r)+i[5]-378558)<<4|e>>>28)+a<<0))+i[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(t=((t+=(n^a)+i[11]+1839030562)<<16|t>>>16)+r<<0))+i[14]-35309556)<<23|a>>>9)+t<<0,a=((a+=((n=(r=((r+=((o=a^t)^(e=((e+=(o^r)+i[1]-1530992060)<<4|e>>>28)+a<<0))+i[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(t=((t+=(n^a)+i[7]-155497632)<<16|t>>>16)+r<<0))+i[10]-1094730640)<<23|a>>>9)+t<<0,a=((a+=((n=(r=((r+=((o=a^t)^(e=((e+=(o^r)+i[13]+681279174)<<4|e>>>28)+a<<0))+i[0]-358537222)<<11|r>>>21)+e<<0)^e)^(t=((t+=(n^a)+i[3]-722521979)<<16|t>>>16)+r<<0))+i[6]+76029189)<<23|a>>>9)+t<<0,a=((a+=((n=(r=((r+=((o=a^t)^(e=((e+=(o^r)+i[9]-640364487)<<4|e>>>28)+a<<0))+i[12]-421815835)<<11|r>>>21)+e<<0)^e)^(t=((t+=(n^a)+i[15]+530742520)<<16|t>>>16)+r<<0))+i[2]-995338651)<<23|a>>>9)+t<<0,a=((a+=((r=((r+=(a^((e=((e+=(t^(a|~r))+i[0]-198630844)<<6|e>>>26)+a<<0)|~t))+i[7]+1126891415)<<10|r>>>22)+e<<0)^((t=((t+=(e^(r|~a))+i[14]-1416354905)<<15|t>>>17)+r<<0)|~e))+i[5]-57434055)<<21|a>>>11)+t<<0,a=((a+=((r=((r+=(a^((e=((e+=(t^(a|~r))+i[12]+1700485571)<<6|e>>>26)+a<<0)|~t))+i[3]-1894986606)<<10|r>>>22)+e<<0)^((t=((t+=(e^(r|~a))+i[10]-1051523)<<15|t>>>17)+r<<0)|~e))+i[1]-2054922799)<<21|a>>>11)+t<<0,a=((a+=((r=((r+=(a^((e=((e+=(t^(a|~r))+i[8]+1873313359)<<6|e>>>26)+a<<0)|~t))+i[15]-30611744)<<10|r>>>22)+e<<0)^((t=((t+=(e^(r|~a))+i[6]-1560198380)<<15|t>>>17)+r<<0)|~e))+i[13]+1309151649)<<21|a>>>11)+t<<0,a=((a+=((r=((r+=(a^((e=((e+=(t^(a|~r))+i[4]-145523070)<<6|e>>>26)+a<<0)|~t))+i[11]-1120210379)<<10|r>>>22)+e<<0)^((t=((t+=(e^(r|~a))+i[2]+718787259)<<15|t>>>17)+r<<0)|~e))+i[9]-343485551)<<21|a>>>11)+t<<0,this.first?(this.h0=e+1732584193<<0,this.h1=a-271733879<<0,this.h2=t-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+a<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0)},g.prototype.toString=g.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,o=this.h3;return u[e>>4&15]+u[15&e]+u[e>>12&15]+u[e>>8&15]+u[e>>20&15]+u[e>>16&15]+u[e>>28&15]+u[e>>24&15]+u[t>>4&15]+u[15&t]+u[t>>12&15]+u[t>>8&15]+u[t>>20&15]+u[t>>16&15]+u[t>>28&15]+u[t>>24&15]+u[r>>4&15]+u[15&r]+u[r>>12&15]+u[r>>8&15]+u[r>>20&15]+u[r>>16&15]+u[r>>28&15]+u[r>>24&15]+u[o>>4&15]+u[15&o]+u[o>>12&15]+u[o>>8&15]+u[o>>20&15]+u[o>>16&15]+u[o>>28&15]+u[o>>24&15]},g.prototype.array=g.prototype.digest=function(e){if("hex"===e)return this.hex();this.finalize();var e=this.h0,t=this.h1,r=this.h2,o=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255]},g.prototype.buffer=g.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},g.prototype.base64=function(){for(var e,t,r,o="",n=this.array(),i=0;i<15;)e=n[i++],t=n[i++],r=n[i++],o+=h[e>>>2]+h[63&(e<<4|t>>>4)]+h[63&(t<<2|r>>>6)]+h[63&r];return e=n[i],o+=h[e>>>2]+h[e<<4&63]+"=="};var m=function(){var t=o("hex");t.getCtx=t.create=function(){return new g},t.update=function(e){return t.create().update(e)};for(var e=0;e<p.length;++e){var r=p[e];t[r]=o(r)}return t}();a?e.exports=m:(i.md5=m,s&&void 0!==(r=function(){return m}.call(m,y,m,e))&&(e.exports=r))}.call(this,y("./node_modules/webpack/buildin/module.js")(e))},"./lib/request.js":function(e,t,r){function p(e,t,r){var o={},n=t.getAllResponseHeaders();return n&&0<n.length&&n.trim().split("\n").forEach(function(e){var t,r;e&&(t=e.indexOf(":"),r=e.substr(0,t).trim().toLowerCase(),e=e.substr(t+1).trim(),o[r]=e)}),{error:e,statusCode:t.status,statusMessage:t.statusText,headers:o,body:r}}function h(e,t){return t||"text"!==t?e.response:e.responseText}var f=r("./node_modules/@babel/runtime/helpers/typeof.js"),g=function(e){switch(f(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(o,n){var r,i,a,e,t=(o.method||"GET").toUpperCase(),s=o.url,c=(o.qs&&(r=o.qs,i=i||"&",a=a||"=",e="object"===f(r=null===r?void 0:r)?Object.keys(r).map(function(e){var t=encodeURIComponent(g(e))+a;return Array.isArray(r[e])?r[e].map(function(e){return t+encodeURIComponent(g(e))}).join(i):t+encodeURIComponent(g(r[e]))}).filter(Boolean).join(i):e?encodeURIComponent(g(e))+a+encodeURIComponent(g(r)):"")&&(s+=(-1===s.indexOf("?")?"?":"&")+e),new XMLHttpRequest);if(c.open(t,s,!0),c.responseType=o.dataType||"text",o.xhrFields)for(var u in o.xhrFields)c[u]=o.xhrFields[u];var l=o.headers;if(l)for(var d in l)l.hasOwnProperty(d)&&"content-length"!==d.toLowerCase()&&"user-agent"!==d.toLowerCase()&&"origin"!==d.toLowerCase()&&"host"!==d.toLowerCase()&&c.setRequestHeader(d,l[d]);return o.onProgress&&c.upload&&(c.upload.onprogress=o.onProgress),o.onDownloadProgress&&(c.onprogress=o.onDownloadProgress),o.timeout&&(c.timeout=o.timeout),c.ontimeout=function(e){var t=new Error("timeout");n(p(t,c))},c.onload=function(){n(p(null,c,h(c,o.dataType)))},c.onerror=function(e){var t,r=h(c,o.dataType);r?n(p(null,c,r)):((t=c.statusText)||0!==c.status||(t=new Error("CORS blocked or network error")),n(p(t,c,r)))},c.send(o.body||""),c}},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(e,t,r){var o=r("./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if(r=r.call(e,t||"default"),"object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(e,t,r){var o=r("./node_modules/@babel/runtime/helpers/typeof.js").default,n=r("./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){return e=n(e,"string"),"symbol"===o(e)?e:String(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(t,e){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(e,t,r){var o=r("./node_modules/fast-xml-parser/src/validator.js"),n=r("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),r=r("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");e.exports={XMLParser:n,XMLValidator:o,XMLBuilder:r}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(e,t){e.exports=function(o){return"function"==typeof o?o:Array.isArray(o)?function(e){for(var t=_createForOfIteratorHelperLoose(o);!(r=t()).done;){var r=r.value;if("string"==typeof r&&e===r)return!0;if(r instanceof RegExp&&r.test(e))return!0}}:function(){return!1}}},"./node_modules/fast-xml-parser/src/util.js":function(e,t,r){var o=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o="["+o+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+o+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t)for(var o=Object.keys(t),n=o.length,i=0;i<n;i++)e[o[i]]="strict"===r?[t[o[i]]]:t[o[i]]},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){e=n.exec(e);return!(null==e)},t.getAllMatches=function(e,t){for(var r=[],o=t.exec(e);o;){for(var n=[],i=(n.startIndex=t.lastIndex-o[0].length,o.length),a=0;a<i;a++)n.push(o[a]);r.push(n),o=t.exec(e)}return r},t.nameRegexp=o},"./node_modules/fast-xml-parser/src/validator.js":function(e,t,r){var f=r("./node_modules/fast-xml-parser/src/util.js"),g={allowBooleanAttributes:!1,unpairedTags:[]};function m(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function y(e,t){for(var r=t;t<e.length;t++)if("?"==e[t]||" "==e[t]){var o=e.substr(r,t-r);if(5<t&&"xml"===o)return S("InvalidXml","XML declaration allowed only at the start of the document.",x(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function k(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){var r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&0===--r)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=Object.assign({},g,t);var r=[],o=!1,n=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(var i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if((i=y(e,i+=2)).err)return i}else if("<"===e[i]){var a=i;if("!"===e[++i])i=k(e,i);else{for(var s=!1,c=("/"===e[i]&&(s=!0,i++),"");i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)c+=e[i];if("/"===(c=c.trim())[c.length-1]&&(c=c.substring(0,c.length-1),i--),u=c,!f.isName(u))return S("InvalidTag",0===c.trim().length?"Invalid space after '<'.":"Tag '"+c+"' is an invalid name.",x(e,i));var u=function(e,t){for(var r="",o="",n=!1;t<e.length;t++){if(e[t]===C||e[t]===v)""===o?o=e[t]:o===e[t]&&(o="");else if(">"===e[t]&&""===o){n=!0;break}r+=e[t]}return""===o&&{value:r,index:t,tagClosed:n}}(e,i);if(!1===u)return S("InvalidAttr","Attributes for '"+c+"' have open quote.",x(e,i));var l=u.value,i=u.index;if("/"===l[l.length-1]){var d=i-l.length,p=b(l=l.substring(0,l.length-1),t);if(!0!==p)return S(p.err.code,p.err.msg,x(e,d+p.err.line));o=!0}else if(s){if(!u.tagClosed)return S("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",x(e,i));if(0<l.trim().length)return S("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",x(e,a));if(0===r.length)return S("InvalidTag","Closing tag '"+c+"' has not been opened.",x(e,a));d=r.pop();if(c!==d.tagName)return p=x(e,d.tagStartPos),S("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",x(e,a));0==r.length&&(n=!0)}else{s=b(l,t);if(!0!==s)return S(s.err.code,s.err.msg,x(e,i-l.length+s.err.line));if(!0===n)return S("InvalidXml","Multiple possible root nodes found.",x(e,i));-1===t.unpairedTags.indexOf(c)&&r.push({tagName:c,tagStartPos:a}),o=!0}for(i++;i<e.length;i++)if("<"===e[i])if("!"===e[i+1])i=k(e,++i);else{if("?"!==e[i+1])break;if((i=y(e,++i)).err)return i}else if("&"===e[i]){var h=function(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){var r=/\d/;"x"===e[t]&&(t++,r=/[\da-fA-F]/);for(;t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);for(var r=0;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}(e,i);if(-1==h)return S("InvalidChar","char '&' is not expected.",x(e,i));i=h}else if(!0===n&&!m(e[i]))return S("InvalidXml","Extra text at the end",x(e,i));"<"===e[i]&&i--}}else if(!m(e[i]))return S("InvalidChar","char '"+e[i]+"' is not expected.",x(e,i));return o?1==r.length?S("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",x(e,r[0].tagStartPos)):!(0<r.length)||S("InvalidXml","Invalid '"+JSON.stringify(r.map(function(e){return e.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):S("InvalidXml","Start tag expected.",1)};var C='"',v="'";var a=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function b(e,t){for(var r=f.getAllMatches(e,a),o={},n=0;n<r.length;n++){if(0===r[n][1].length)return S("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",s(r[n]));if(void 0!==r[n][3]&&void 0===r[n][4])return S("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",s(r[n]));if(void 0===r[n][3]&&!t.allowBooleanAttributes)return S("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",s(r[n]));var i=r[n][2];if(!f.isName(i))return S("InvalidAttr","Attribute '"+i+"' is an invalid name.",s(r[n]));if(o.hasOwnProperty(i))return S("InvalidAttr","Attribute '"+i+"' is repeated.",s(r[n]));o[i]=1}return!0}function S(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function x(e,t){e=e.substring(0,t).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function s(e){return e.startIndex+e[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(e,t,r){var o=r("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),n=r("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),i={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function a(e){this.options=Object.assign({},i,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=n(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=u),this.processTextOrObjNode=s,this.options.format?(this.indentate=c,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function s(e,t,r,o){o=this.j2x(e,r+1,o.concat(t));return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,r):this.buildObjectNode(o.val,t,o.attrStr,r)}function c(e){return this.options.indentBy.repeat(e)}function u(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}a.prototype.build=function(e){var t;return this.options.preserveOrder?o(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&1<this.options.arrayNodeName.length&&((t={})[this.options.arrayNodeName]=e,e=t),this.j2x(e,0,[]).val)},a.prototype.j2x=function(e,t,r){var o,n="",i="",a=r.join(".");for(o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(void 0===e[o])this.isAttribute(o)&&(i+="");else if(null===e[o])this.isAttribute(o)?i+="":"?"===o[0]?i+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)i+=this.buildTextValNode(e[o],o,"",t);else if("object"!=typeof e[o]){var s=this.isAttribute(o);s&&!this.ignoreAttributesFn(s,a)?n+=this.buildAttrPairStr(s,""+e[o]):s||(o===this.options.textNodeName?(s=this.options.tagValueProcessor(o,""+e[o]),i+=this.replaceEntitiesValue(s)):i+=this.buildTextValNode(e[o],o,"",t))}else if(Array.isArray(e[o])){for(var c=e[o].length,u="",l="",d=0;d<c;d++){var p,h=e[o][d];void 0!==h&&(null===h?"?"===o[0]?i+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:"object"==typeof h?this.options.oneListGroup?(u+=(p=this.j2x(h,t+1,r.concat(o))).val,this.options.attributesGroupName&&h.hasOwnProperty(this.options.attributesGroupName)&&(l+=p.attrStr)):u+=this.processTextOrObjNode(h,o,t,r):this.options.oneListGroup?(p=this.options.tagValueProcessor(o,h),u+=p=this.replaceEntitiesValue(p)):u+=this.buildTextValNode(h,o,"",t))}i+=u=this.options.oneListGroup?this.buildObjectNode(u,o,l,t):u}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName)for(var f=Object.keys(e[o]),g=f.length,m=0;m<g;m++)n+=this.buildAttrPairStr(f[m],""+e[o][f[m]]);else i+=this.processTextOrObjNode(e[o],o,t,r);return{attrStr:n,val:i}},a.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},a.prototype.buildObjectNode=function(e,t,r,o){var n,i;return""===e?"?"===t[0]?this.indentate(o)+"<"+t+r+"?"+this.tagEndChar:this.indentate(o)+"<"+t+r+this.closeTag(t)+this.tagEndChar:(n="</"+t+this.tagEndChar,i="","?"===t[0]&&(i="?",n=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===i.length?this.indentate(o)+"\x3c!--"+e+"--\x3e"+this.newLine:this.indentate(o)+"<"+t+r+i+this.tagEndChar+e+this.indentate(o)+n:this.indentate(o)+"<"+t+r+i+">"+e+n)},a.prototype.closeTag=function(e){var t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":"></"+e,t},a.prototype.buildTextValNode=function(e,t,r,o){return!1!==this.options.cdataPropName&&t===this.options.cdataPropName?this.indentate(o)+"<![CDATA["+e+"]]>"+this.newLine:!1!==this.options.commentPropName&&t===this.options.commentPropName?this.indentate(o)+"\x3c!--"+e+"--\x3e"+this.newLine:"?"===t[0]?this.indentate(o)+"<"+t+r+"?"+this.tagEndChar:(e=this.options.tagValueProcessor(t,e),""===(e=this.replaceEntitiesValue(e))?this.indentate(o)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(o)+"<"+t+r+">"+e+"</"+t+this.tagEndChar)},a.prototype.replaceEntitiesValue=function(e){if(e&&0<e.length&&this.options.processEntities)for(var t=0;t<this.options.entities.length;t++){var r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e},e.exports=a},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(e,t){function g(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];if(e.hasOwnProperty(o)&&":@"!==o)return o}}function m(e,t){var r,o="";if(e&&!t.ignoreAttributes)for(var n in e)e.hasOwnProperty(n)&&(!0===(r=k(t.attributeValueProcessor(n,e[n]),t))&&t.suppressBooleanAttributes?o+=" "+n.substr(t.attributeNamePrefix.length):o+=" "+n.substr(t.attributeNamePrefix.length)+'="'+r+'"');return o}function y(e,t){var r,o=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+o)return!0;return!1}function k(e,t){if(e&&0<e.length&&t.processEntities)for(var r=0;r<t.entities.length;r++){var o=t.entities[r];e=e.replace(o.regex,o.val)}return e}e.exports=function(e,t){var r="";return function e(t,r,o,n){var i="";var a=!1;for(var s=0;s<t.length;s++){var c,u,l,d,p,h=t[s],f=g(h);void 0!==f&&(c="",c=0===o.length?f:o+"."+f,a=f===r.textNodeName?(u=h[f],y(c,r)||(u=k(u=r.tagValueProcessor(f,u),r)),a&&(i+=n),i+=u,!1):f===r.cdataPropName?(a&&(i+=n),i+="<![CDATA["+h[f][0][r.textNodeName]+"]]>",!1):(f===r.commentPropName?i+=n+("\x3c!--"+h[f][0][r.textNodeName])+"--\x3e":"?"===f[0]?(u=m(h[":@"],r),l="?xml"===f?"":n,d=0!==(d=h[f][0][r.textNodeName]).length?" "+d:"",i+=l+"<"+f+d+u+"?>"):(""!==(l=n)&&(l+=r.indentBy),d=m(h[":@"],r),p=n+"<"+f+d,h=e(h[f],r,c,l),-1!==r.unpairedTags.indexOf(f)?r.suppressUnpairedNode?i+=p+">":i+=p+"/>":h&&0!==h.length||!r.suppressEmptyNode?h&&h.endsWith(">")?i+=p+">"+h+n+"</"+f+">":(i+=p+">",h&&""!==n&&(h.includes("/>")||h.includes("</"))?i+=n+r.indentBy+h+n:i+=h,i+="</"+f+">"):i+=p+"/>"),!0))}return i}(e,t,"",r=t.format&&0<t.indentBy.length?"\n":r)}},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(e,t,r){var l=r("./node_modules/fast-xml-parser/src/util.js");e.exports=function(e,t){var r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");t+=9;for(var o,n,i,a,s=1,c=!1,u=!1;t<e.length;t++)if("<"!==e[t]||u)if(">"===e[t]){if(u?"-"===e[t-1]&&"-"===e[t-2]&&(u=!1,s--):s--,0===s)break}else"["===e[t]?c=!0:e[t];else c&&"!"===(i=e)[(a=t)+1]&&"E"===i[a+2]&&"N"===i[a+3]&&"T"===i[a+4]&&"I"===i[a+5]&&"T"===i[a+6]&&"Y"===i[a+7]?(i=function(e,t){for(var r="";t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(-1!==(r=r.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var o=e[t++],n="";t<e.length&&e[t]!==o;t++)n+=e[t];return[r,n,t]}(e,(t+=7)+1),entityName=i[0],val=i[1],t=i[2],-1===val.indexOf("&")&&(r[function(e){{if(l.isName(e))return e;throw new Error("Invalid entity name "+e)}}(entityName)]={regx:RegExp("&"+entityName+";","g"),val:val})):c&&"!"===(a=e)[(i=t)+1]&&"E"===a[i+2]&&"L"===a[i+3]&&"E"===a[i+4]&&"M"===a[i+5]&&"E"===a[i+6]&&"N"===a[i+7]&&"T"===a[i+8]||c&&"!"===(o=e)[(n=t)+1]&&"A"===o[n+2]&&"T"===o[n+3]&&"T"===o[n+4]&&"L"===o[n+5]&&"I"===o[n+6]&&"S"===o[n+7]&&"T"===o[n+8]?t+=8:c&&"!"===(o=e)[(n=t)+1]&&"N"===o[n+2]&&"O"===o[n+3]&&"T"===o[n+4]&&"A"===o[n+5]&&"T"===o[n+6]&&"I"===o[n+7]&&"O"===o[n+8]&&"N"===o[n+9]?t+=9:u=!0,s++,0;if(0!==s)throw new Error("Unclosed DOCTYPE");return{entities:r,i:t}}},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(e,t){var r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}};t.buildOptions=function(e){return Object.assign({},r,e)},t.defaultOptions=r},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(e,t,r){var l=r("./node_modules/fast-xml-parser/src/util.js"),v=r("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),b=r("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),o=r("./node_modules/strnum/strnum.js"),n=r("./node_modules/fast-xml-parser/src/ignoreAttributes.js");function i(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];this.lastEntities[o]={regex:new RegExp("&"+o+";","g"),val:e[o]}}}function a(e,t,r,o,n,i,a){if(void 0!==e&&0<(e=this.options.trimValues&&!o?e.trim():e).length)return a||(e=this.replaceEntitiesValue(e)),null==(o=this.options.tagValueProcessor(t,e,r,n,i))?e:typeof o!=typeof e||o!==e?o:this.options.trimValues||e.trim()===e?y(e,this.options.parseTagValue,this.options.numberParseOptions):e}function s(e){if(this.options.removeNSPrefix){var t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}var d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function c(e,t,r){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){for(var o=l.getAllMatches(e,d),n=o.length,i={},a=0;a<n;a++){var s,c,u=this.resolveNameSpace(o[a][1]);this.ignoreAttributesFn(u,t)||(c=o[a][4],s=this.options.attributeNamePrefix+u,u.length&&("__proto__"===(s=this.options.transformAttributeName?this.options.transformAttributeName(s):s)&&(s="#__proto__"),void 0!==c?(this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c),u=this.options.attributeValueProcessor(u,c,t),i[s]=null==u?c:typeof u!=typeof c||u!==c?u:y(c,this.options.parseAttributeValue,this.options.numberParseOptions)):this.options.allowBooleanAttributes&&(i[s]=!0)))}if(Object.keys(i).length)return this.options.attributesGroupName?((e={})[this.options.attributesGroupName]=i,e):i}}function u(e){e=e.replace(/\r\n?/g,"\n");for(var t=new v("!xml"),r=t,o="",n="",i=0;i<e.length;i++)if("<"===e[i])if("/"===e[i+1]){var a=S(e,">",i,"Closing Tag is not closed."),s=e.substring(i+2,a).trim(),c=(this.options.removeNSPrefix&&-1!==(c=s.indexOf(":"))&&(s=s.substr(c+1)),this.options.transformTagName&&(s=this.options.transformTagName(s)),r&&(o=this.saveTextToParentTag(o,r,n)),n.substring(n.lastIndexOf(".")+1));if(s&&-1!==this.options.unpairedTags.indexOf(s))throw new Error("Unpaired tag can not be used as closing tag: </"+s+">");s=0;c&&-1!==this.options.unpairedTags.indexOf(c)?(s=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):s=n.lastIndexOf("."),n=n.substring(0,s),r=this.tagsNodeStack.pop(),o="",i=a}else if("?"===e[i+1]){s=x(e,i,!1,"?>");if(!s)throw new Error("Pi Tag is not closed.");o=this.saveTextToParentTag(o,r,n),this.options.ignoreDeclaration&&"?xml"===s.tagName||this.options.ignorePiTags||((a=new v(s.tagName)).add(this.options.textNodeName,""),s.tagName!==s.tagExp&&s.attrExpPresent&&(a[":@"]=this.buildAttributesMap(s.tagExp,n,s.tagName)),this.addChild(r,a,n)),i=s.closeIndex+1}else if("!--"===e.substr(i+1,3)){var u=S(e,"--\x3e",i+4,"Comment is not closed.");this.options.commentPropName&&(l=e.substring(i+4,u-2),o=this.saveTextToParentTag(o,r,n),r.add(this.options.commentPropName,[((d={})[this.options.textNodeName]=l,d)])),i=u}else if("!D"===e.substr(i+1,2)){var l=b(e,i);this.docTypeEntities=l.entities,i=l.i}else if("!["===e.substr(i+1,2)){var d=S(e,"]]>",i,"CDATA is not closed.")-2,u=e.substring(i+9,d),p=(o=this.saveTextToParentTag(o,r,n),this.parseTextData(u,r.tagname,n,!0,!1,!0,!0));null==p&&(p=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[((h={})[this.options.textNodeName]=u,h)]):r.add(this.options.textNodeName,p),i=2+d}else{var h=x(e,i,this.options.removeNSPrefix),p=h.tagName,f=h.rawTagName,g=h.tagExp,m=h.attrExpPresent,y=h.closeIndex,k=(this.options.transformTagName&&(p=this.options.transformTagName(p)),r&&o&&"!xml"!==r.tagname&&(o=this.saveTextToParentTag(o,r,n,!1)),r);if(k&&-1!==this.options.unpairedTags.indexOf(k.tagname)&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),p!==t.tagname&&(n+=n?"."+p:p),this.isItStopNode(this.options.stopNodes,n,p)){var k="";if(0<g.length&&g.lastIndexOf("/")===g.length-1)g="/"===p[p.length-1]?(p=p.substr(0,p.length-1),n=n.substr(0,n.length-1),p):g.substr(0,g.length-1),i=h.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(p))i=h.closeIndex;else{var C=this.readStopNodeData(e,f,y+1);if(!C)throw new Error("Unexpected end of "+f);i=C.i,k=C.tagContent}f=new v(p);p!==g&&m&&(f[":@"]=this.buildAttributesMap(g,n,p)),k=k&&this.parseTextData(k,p,n,!0,m,!0,!0),n=n.substr(0,n.lastIndexOf(".")),f.add(this.options.textNodeName,k),this.addChild(r,f,n)}else 0<g.length&&g.lastIndexOf("/")===g.length-1?(g="/"===p[p.length-1]?(p=p.substr(0,p.length-1),n=n.substr(0,n.length-1),p):g.substr(0,g.length-1),this.options.transformTagName&&(p=this.options.transformTagName(p)),C=new v(p),p!==g&&m&&(C[":@"]=this.buildAttributesMap(g,n,p)),this.addChild(r,C,n),n=n.substr(0,n.lastIndexOf("."))):(k=new v(p),this.tagsNodeStack.push(r),p!==g&&m&&(k[":@"]=this.buildAttributesMap(g,n,p)),this.addChild(r,k,n),r=k),o="",i=y}else o+=e[i];return t.child}function p(e,t,r){r=this.options.updateTag(t.tagname,r,t[":@"]);!1!==r&&("string"==typeof r&&(t.tagname=r),e.addChild(t))}function h(e){if(this.options.processEntities){for(var t in this.docTypeEntities){t=this.docTypeEntities[t];e=e.replace(t.regx,t.val)}for(var r in this.lastEntities){r=this.lastEntities[r];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(var o in this.htmlEntities){o=this.htmlEntities[o];e=e.replace(o.regex,o.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e}function f(e,t,r,o){return e&&(void 0===o&&(o=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,o))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function g(e,t,r){var o,n="*."+r;for(o in e){var i=e[o];if(n===i||t===i)return!0}return!1}function S(e,t,r,o){e=e.indexOf(t,r);if(-1===e)throw new Error(o);return e+t.length-1}function x(e,t,r,o){var n,i,a,e=function(e,t,r){void 0===r&&(r=">");for(var o,n="",i=t;i<e.length;i++){var a=e[i];if(o)a===o&&(o="");else if('"'===a||"'"===a)o=a;else if(a===r[0]){if(!r[1])return{data:n,index:i};if(e[i+1]===r[1])return{data:n,index:i}}else"\t"===a&&(a=" ");n+=a}}(e,t+1,o=void 0===o?">":o);if(e)return t=e.data,o=e.index,a=t.search(/\s/),n=t,i=!0,-1!==a&&(n=t.substring(0,a),t=t.substring(a+1).trimStart()),a=n,r&&-1!==(r=n.indexOf(":"))&&(i=(n=n.substr(r+1))!==e.data.substr(r+1)),{tagName:n,tagExp:t,closeIndex:o,attrExpPresent:i,rawTagName:a}}function m(e,t,r){for(var o=r,n=1;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){var i=S(e,">",r,t+" is not closed"),a=e.substring(r+2,i).trim();if(a===t&&0===--n)return{tagContent:e.substring(o,r),i:i};r=i}else"?"===e[r+1]?r=S(e,"?>",r+1,"StopNode is not closed."):"!--"===e.substr(r+1,3)?r=S(e,"--\x3e",r+3,"StopNode is not closed."):"!["===e.substr(r+1,2)?r=S(e,"]]>",r,"StopNode is not closed.")-2:(a=x(e,r,">"))&&((a&&a.tagName)===t&&"/"!==a.tagExp[a.tagExp.length-1]&&n++,r=a.closeIndex)}function y(e,t,r){return t&&"string"==typeof e?"true"===(t=e.trim())||"false"!==t&&o(e,r):l.isExist(e)?e:""}e.exports=function(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:function(e,t){return String.fromCharCode(Number.parseInt(t,10))}},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:function(e,t){return String.fromCharCode(Number.parseInt(t,16))}}},this.addExternalEntities=i,this.parseXml=u,this.parseTextData=a,this.resolveNameSpace=s,this.buildAttributesMap=c,this.isItStopNode=g,this.replaceEntitiesValue=h,this.readStopNodeData=m,this.saveTextToParentTag=f,this.addChild=p,this.ignoreAttributesFn=n(this.options.ignoreAttributes)}},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(e,t,r){var o=r("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js").buildOptions,n=r("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),i=r("./node_modules/fast-xml-parser/src/xmlparser/node2json.js").prettify,a=r("./node_modules/fast-xml-parser/src/validator.js");e.exports=function(){function e(e){this.externalEntities={},this.options=o(e)}var t=e.prototype;return t.parse=function(e,t){if("string"!=typeof e){if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){t=a.validate(e,t=!0===t?{}:t);if(!0!==t)throw Error(t.err.msg+":"+t.err.line+":"+t.err.col)}t=new n(this.options),t.addExternalEntities(this.externalEntities),t=t.parseXml(e);return this.options.preserveOrder||void 0===t?t:i(t,this.options)},t.addEntity=function(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t},e}()},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(e,t,r){function p(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var o=t[r];if(":@"!==o)return o}}function h(e,t,r,o){if(t)for(var n=Object.keys(t),i=n.length,a=0;a<i;a++){var s=n[a];o.isArray(s,r+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}function f(e,t){var t=t.textNodeName,r=Object.keys(e).length;return 0===r||!(1!==r||!e[t]&&"boolean"!=typeof e[t]&&0!==e[t])}t.prettify=function(e,t){return function e(t,r,o){var n;var i={};for(var a=0;a<t.length;a++){var s,c,u=t[a],l=p(u),d="";d=void 0===o?l:o+"."+l,l===r.textNodeName?void 0===n?n=u[l]:n+=""+u[l]:void 0!==l&&u[l]&&(s=e(u[l],r,d),c=f(s,r),u[":@"]?h(s,u[":@"],d,r):1!==Object.keys(s).length||void 0===s[r.textNodeName]||r.alwaysCreateTextNode?0===Object.keys(s).length&&(r.alwaysCreateTextNode?s[r.textNodeName]="":s=""):s=s[r.textNodeName],void 0!==i[l]&&i.hasOwnProperty(l)?(Array.isArray(i[l])||(i[l]=[i[l]]),i[l].push(s)):r.isArray(l,d,c)?i[l]=[s]:i[l]=s)}"string"==typeof n?0<n.length&&(i[r.textNodeName]=n):void 0!==n&&(i[r.textNodeName]=n);return i}(e,t)}},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(e,t,r){e.exports=function(){function e(e){this.tagname=e,this.child=[],this[":@"]={}}var t=e.prototype;return t.add=function(e,t){var r;this.child.push(((r={})[e="__proto__"===e?"#__proto__":e]=t,r))},t.addChild=function(e){var t;"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&0<Object.keys(e[":@"]).length?this.child.push(((t={})[e.tagname]=e.child,t[":@"]=e[":@"],t)):this.child.push(((t={})[e.tagname]=e.child,t))},e}()},"./node_modules/process/browser.js":function(e,t){var r,o,e=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===n||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length)&&p()}function p(){if(!u){for(var e=a(d),t=(u=!0,c.length);t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,!function(t){if(o===clearTimeout)return clearTimeout(t);if((o===i||!o)&&clearTimeout)return(o=clearTimeout)(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||u||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(e,t){var u=/^[-+]?0x[a-fA-F0-9]+$/,l=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/,d=(!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat),{hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0});e.exports=function(e,t){var r,o,n,i,a,s,c;return void 0===t&&(t={}),t=Object.assign({},d,t),!e||"string"!=typeof e||(r=e.trim(),void 0!==t.skipLike&&t.skipLike.test(r))?e:t.hex&&u.test(r)?Number.parseInt(r,16):!(i=l.exec(r))||(o=i[1],n=i[2],(c=i[3])&&-1!==c.indexOf(".")&&("."===(c=c.replace(/0+$/,""))?c="0":"."===c[0]?c="0"+c:"."===c[c.length-1]&&(c=c.substr(0,c.length-1))),c=c,i=i[4]||i[6],!t.leadingZeros&&0<n.length&&o&&"."!==r[2])||!t.leadingZeros&&0<n.length&&!o&&"."!==r[1]?e:-1!==(s=""+(a=Number(r))).search(/[eE]/)||i?t.eNotation?a:e:-1!==r.indexOf(".")?"0"===s&&""===c||s===c||o&&s==="-"+c?a:e:n?c===s||o+c===s?a:e:r===s||r===o+s?a:e}},"./node_modules/webpack/buildin/amd-options.js":function(t,e){!function(e){t.exports=e}.call(this,{})},"./node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./package.json":function(e){e.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.8.7","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(e,t,r){var m=r("./node_modules/@babel/runtime/helpers/typeof.js"),x=r("./src/session.js"),T=r("./src/async.js"),R=r("./src/event.js").EventProxy,B=r("./src/util.js"),y=r("./src/tracker.js");function v(e,o){var t=this,n=[],i={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key,calledBySdk:e.calledBySdk||"sliceUploadFile",tracker:e.tracker};(function r(){t.multipartList(i,function(e,t){if(e)return o(e);n.push.apply(n,t.Upload||[]),"true"===t.IsTruncated?(i.KeyMarker=t.NextKeyMarker,i.UploadIdMarker=t.NextUploadIdMarker,r()):o(null,{UploadList:n})})})()}function A(e,o){var t=this,n=[],i={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId,calledBySdk:"sliceUploadFile",tracker:e.tracker};(function r(){t.multipartListPart(i,function(e,t){if(e)return o(e);n.push.apply(n,t.Part||[]),"true"===t.IsTruncated?(i.PartNumberMarker=t.NextPartNumberMarker,r()):o(null,{PartList:n})})})()}var o={sliceUploadFile:function(n,t){var i,a,s=this,c=new R,u=n.TaskId,l=n.Bucket,d=n.Region,p=n.Key,r=n.Body,o=n.ChunkSize||n.SliceSize||s.options.ChunkSize,h=n.AsyncLimit,f=n.StorageClass,g=n.ServerSideEncryption,m=n.onHashProgress,y=n.tracker;y&&y.setParams({chunkSize:o}),c.on("error",function(e){if(s._isRunningTask(u))return n.UploadData.UploadId&&x.removeUsing(n.UploadData.UploadId),e.UploadId=n.UploadData.UploadId||"",t(e)}),c.on("upload_complete",function(e){e=B.extend({UploadId:n.UploadData.UploadId||""},e);t(null,e)}),c.on("upload_slice_complete",function(r){var o={};B.each(n.Headers,function(e,t){var r=t.toLowerCase();0!==r.indexOf("x-cos-meta-")&&!["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(r)||(o[t]=e)}),function(t,r){var o=t.Bucket,n=t.Region,i=t.Key,a=t.UploadId,e=t.SliceList,s=this,c=this.options.ChunkRetryTimes+1,u=t.Headers,l=e.map(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});T.retry(c,function(e){s.multipartComplete({Bucket:o,Region:n,Key:i,UploadId:a,Parts:l,Headers:u,calledBySdk:"sliceUploadFile",tracker:t.tracker},e)},function(e,t){r(e,t)})}.call(s,{Bucket:l,Region:d,Key:p,UploadId:r.UploadId,SliceList:r.SliceList,Headers:o,tracker:y},function(e,t){if(s._isRunningTask(u)){if(x.removeUsing(r.UploadId),e)return a(null,!0),c.emit("error",e);x.removeUploadId.call(s,r.UploadId),a({loaded:i,total:i},!0),c.emit("upload_complete",t)}})}),c.on("get_upload_data_finish",function(e){var t=x.getFileId(r,n.ChunkSize,l,p);t&&x.saveUploadId.call(s,t,e.UploadId,s.options.UploadIdCacheLimit),x.setUsing(e.UploadId),a(null,!0),function(t,r){var a=this,s=t.TaskId,c=t.Bucket,u=t.Region,l=t.Key,d=t.UploadData,p=t.FileSize,h=t.SliceSize,e=Math.min(t.AsyncLimit||a.options.ChunkParallelLimit||1,256),f=t.Body,o=Math.ceil(p/h),g=0,m=t.ServerSideEncryption,y=t.Headers,n=B.filter(d.PartList,function(e){return e.Uploaded&&(g+=e.PartNumber>=o&&p%h||h),!e.Uploaded}),k=t.onProgress;T.eachLimit(n,e,function(r,o){var e,n,i;a._isRunningTask(s)&&(e=r.PartNumber,n=Math.min(p,r.PartNumber*h)-(r.PartNumber-1)*h,i=0,function(t,r){var o=this,n=t.TaskId,i=t.Bucket,a=t.Region,s=t.Key,e=t.FileSize,c=t.Body,u=+t.PartNumber,l=t.SliceSize,d=t.ServerSideEncryption,p=t.UploadData,h=t.Headers||{},f=o.options.ChunkRetryTimes+1,g=l*(u-1),m=l,y=g+l;e<y&&(m=(y=e)-g);var k=["x-cos-traffic-limit","x-cos-mime-limit"],C={},v=(B.each(h,function(e,t){-1<k.indexOf(t)&&(C[t]=e)}),p.PartList[u-1]);T.retry(f,function(r){o._isRunningTask(n)&&B.fileSlice(c,g,y,!0,function(e){o.multipartUpload({TaskId:n,Bucket:i,Region:a,Key:s,ContentLength:m,PartNumber:u,UploadId:p.UploadId,ServerSideEncryption:d,Body:e,Headers:C,onProgress:t.onProgress,calledBySdk:"sliceUploadFile",tracker:t.tracker},function(e,t){if(o._isRunningTask(n))return e?r(e):(v.Uploaded=!0,r(null,t))})})},function(e,t){if(o._isRunningTask(n))return r(e,t)})}.call(a,{TaskId:s,Bucket:c,Region:u,Key:l,SliceSize:h,FileSize:p,PartNumber:e,ServerSideEncryption:m,Body:f,UploadData:d,Headers:y,onProgress:function(e){g+=e.loaded-i,i=e.loaded,k({loaded:g,total:p})},tracker:t.tracker},function(e,t){a._isRunningTask(s)&&((e=e||t.ETag?e:'get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )')?g-=i:(g+=n-i,r.ETag=t.ETag),k({loaded:g,total:p}),o(e||null,t))}))},function(e){if(a._isRunningTask(s))return e?r(e):void r(null,{UploadId:d.UploadId,SliceList:d.PartList})})}.call(s,{TaskId:u,Bucket:l,Region:d,Key:p,Body:r,FileSize:i,SliceSize:o,AsyncLimit:h,ServerSideEncryption:g,UploadData:e,Headers:n.Headers,onProgress:a,tracker:y},function(e,t){if(s._isRunningTask(u))return e?(a(null,!0),c.emit("error",e)):void c.emit("upload_slice_complete",t)})}),c.on("get_file_size_finish",function(){var e;a=B.throttleOnProgress.call(s,i,n.onProgress),n.UploadData.UploadId?c.emit("get_upload_data_finish",n.UploadData):(e=B.extend({TaskId:u,Bucket:l,Region:d,Key:p,Headers:n.Headers,StorageClass:f,Body:r,FileSize:i,SliceSize:o,onHashProgress:m,tracker:y},n),function(a,i){var c=a.TaskId,s=a.Bucket,u=a.Region,l=a.Key,r=a.StorageClass,d=this,p={},h=a.FileSize,f=a.SliceSize,g=Math.ceil(h/f),m=0,y=B.throttleOnProgress.call(d,h,a.onHashProgress),k=function(r,o){var e=f*(r-1),t=Math.min(e+f,h),n=t-e;p[r]?o(null,{PartNumber:r,ETag:p[r],Size:n}):B.fileSlice(a.Body,e,t,!1,function(e){B.getFileMd5(e,function(e,t){if(e)return o(B.error(e));e='"'+t+'"';p[r]=e,y({loaded:m+=n,total:h}),o(null,{PartNumber:r,ETag:e,Size:n})})})},C=new R;C.on("error",function(e){if(d._isRunningTask(c))return i(e)}),C.on("upload_id_available",function(e){var t={},r=[];B.each(e.PartList,function(e){t[e.PartNumber]=e});for(var o=1;o<=g;o++){var n=t[o];n?(n.PartNumber=o,n.Uploaded=!0):n={PartNumber:o,ETag:null,Uploaded:!1},r.push(n)}e.PartList=r,i(null,e)}),C.on("no_available_upload_id",function(){var e,t;d._isRunningTask(c)&&(e=B.extend({Bucket:s,Region:u,Key:l,Query:B.clone(a.Query),StorageClass:r,Body:a.Body,calledBySdk:"sliceUploadFile",tracker:a.tracker},a),delete(t=B.clone(a.Headers))["x-cos-mime-limit"],e.Headers=t,d.multipartInit(e,function(e,t){if(d._isRunningTask(c))return e?C.emit("error",e):(e=t.UploadId)?void C.emit("upload_id_available",{UploadId:e,PartList:[]}):i(B.error(new Error("no such upload id")))}))}),C.on("has_and_check_upload_id",function(e){e=e.reverse(),T.eachLimit(e,1,function(o,n){d._isRunningTask(c)&&(x.using[o]?n():A.call(d,{Bucket:s,Region:u,Key:l,UploadId:o,tracker:a.tracker},function(e,t){if(d._isRunningTask(c)){if(e)return x.removeUsing(o),C.emit("error",e);var r=t.PartList,i=(r.forEach(function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""}),r),a=function(e,t){if(d._isRunningTask(c))return e?C.emit("error",e):void(t?n({UploadId:o,PartList:r}):n())},s=i.length;0===s?a(null,!0):g<s||1<s&&Math.max(i[0].Size,i[1].Size)!==f?a(null,!1):function r(o){var n;o<s?(n=i[o],k(n.PartNumber,function(e,t){t&&t.ETag===n.ETag&&t.Size===n.Size?r(o+1):a(null,!1)})):a(null,!0)}(0)}}))},function(e){d._isRunningTask(c)&&(y(null,!0),e&&e.UploadId?C.emit("upload_id_available",e):C.emit("no_available_upload_id"))})}),C.on("seek_local_avail_upload_id",function(e){var t=x.getFileId(a.Body,a.ChunkSize,s,l),i=x.getUploadIdList.call(d,t);t&&i?function r(o){var n;o>=i.length?C.emit("has_and_check_upload_id",e):(n=i[o],B.isInArray(e,n)?x.using[n]?r(o+1):A.call(d,{Bucket:s,Region:u,Key:l,UploadId:n,tracker:a.tracker},function(e,t){d._isRunningTask(c)&&(e?(x.removeUploadId.call(d,n),r(o+1)):C.emit("upload_id_available",{UploadId:n,PartList:t.PartList}))}):(x.removeUploadId.call(d,n),r(o+1)))}(0):C.emit("has_and_check_upload_id",e)}),C.on("get_remote_upload_id_list",function(){v.call(d,{Bucket:s,Region:u,Key:l,tracker:a.tracker},function(e,t){if(d._isRunningTask(c))return e?C.emit("error",e):void((e=B.filter(t.UploadList,function(e){return e.Key===l&&(!r||e.StorageClass.toUpperCase()===r.toUpperCase())}).reverse().map(function(e){return e.UploadId||e.UploadID})).length?C.emit("seek_local_avail_upload_id",e):((t=x.getFileId(a.Body,a.ChunkSize,s,l))&&(e=x.getUploadIdList.call(d,t))&&B.each(e,function(e){x.removeUploadId.call(d,e)}),C.emit("no_available_upload_id")))})}),C.emit("get_remote_upload_id_list")}.call(s,e,function(e,t){if(s._isRunningTask(u)){if(e)return c.emit("error",e);n.UploadData.UploadId=t.UploadId,n.UploadData.PartList=t.PartList,c.emit("get_upload_data_finish",n.UploadData)}}))}),i=n.ContentLength,delete n.ContentLength,n.Headers||(n.Headers={}),B.each(n.Headers,function(e,t){"content-length"===t.toLowerCase()&&delete n.Headers[t]});for(var e=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],k=1048576,C=0;C<e.length&&!(i/(k=1024*e[C]*1024)<=s.options.MaxPartNumber);C++);n.ChunkSize=n.SliceSize=o=Math.max(o,k),0===i?(n.Body="",n.ContentLength=0,n.SkipTask=!0,s.putObject(n,t)):c.emit("get_file_size_finish")},abortUploadTask:function(t,r){var o=t.Bucket,n=t.Region,i=t.Key,e=t.UploadId,a=t.Level||"task",s=t.AsyncLimit,c=this,u=new R;if(u.on("error",function(e){return r(e)}),u.on("get_abort_array",function(e){!function(e,a){var s=e.Bucket,c=e.Region,t=e.Key,r=e.AbortArray,o=e.AsyncLimit||1,u=this,l=0,d=new Array(r.length);T.eachLimit(r,o,function(r,o){var n,i=l;t&&t!==r.Key?(d[i]={error:{KeyNotMatch:!0}},o(null)):(n=r.UploadId||r.UploadID,u.multipartAbort({Bucket:s,Region:c,Key:r.Key,Headers:e.Headers,UploadId:n},function(e){var t={Bucket:s,Region:c,Key:r.Key,UploadId:n};d[i]={error:e,task:t},o(null)}),l++)},function(e){if(e)return a(e);for(var t=[],r=[],o=0,n=d.length;o<n;o++){var i=d[o];i.task&&(i.error?r:t).push(i.task)}return a(null,{successList:t,errorList:r})})}.call(c,{Bucket:o,Region:n,Key:i,Headers:t.Headers,AsyncLimit:s,AbortArray:e},r)}),"bucket"===a)v.call(c,{Bucket:o,Region:n,calledBySdk:"abortUploadTask"},function(e,t){if(e)return r(e);u.emit("get_abort_array",t.UploadList||[])});else{if("file"!==a)return"task"===a?e?i?void u.emit("get_abort_array",[{Key:i,UploadId:e}]):r(B.error(new Error("abort_upload_task_no_key"))):r(B.error(new Error("abort_upload_task_no_id"))):r(B.error(new Error("abort_unknown_level")));{if(!i)return r(B.error(new Error("abort_upload_task_no_key")));v.call(c,{Bucket:o,Region:n,Key:i,calledBySdk:"abortUploadTask"},function(e,t){if(e)return r(e);u.emit("get_abort_array",t.UploadList||[])})}}},uploadFile:function(r,o){var e=this,t=(void 0===r.SliceSize?e.options:r).SliceSize,n=[],i=(i=r.Body).size||i.length||0,a={TaskId:""},s=(e.options.EnableReporter&&(c=e.options.UseAccelerate||"string"==typeof e.options.Domain&&e.options.Domain.includes("accelerate."),r.tracker=new y({Beacon:e.options.BeaconReporter,clsReporter:e.options.ClsReporter,bucket:r.Bucket,region:r.Region,apiName:"uploadFile",realApi:t<i?"sliceUploadFile":"putObject",fileKey:r.Key,fileSize:i,accelerate:c,deepTracker:e.options.DeepTracker,customId:e.options.CustomId,delay:e.options.TrackerDelay})),B.each(r,function(e,t){"object"!==m(e)&&"function"!=typeof e&&(a[t]=e)}),r.onTaskReady),c=(r.onTaskReady=function(e){a.TaskId=e,s&&s(e)},t<i?"sliceUploadFile":"putObject"),u=r.onFileFinish;n.push({api:c,params:r,callback:function(e,t){r.tracker&&r.tracker.report(e,t),u&&u(e,t,a),o&&o(e,t)}}),e._addTasks(n)},uploadFiles:function(e,o){function u(e,t,r){f(null,!0),i&&i(e,t,r),a[r.Index]={options:r,error:e,data:t},--n<=0&&o&&o(null,{files:a})}var l=this,d=(void 0===e.SliceSize?l.options:e).SliceSize,p=0,h=0,f=B.throttleOnProgress.call(l,h,e.onProgress),n=e.files.length,i=e.onFileFinish,a=Array(n),g=[];B.each(e.files,function(r,e){var t,o,n,i,a,s,c;t=(t=r.Body).size||t.length||0,o={Index:e,TaskId:""},!l.options.UseRawKey&&r.Key&&"/"===r.Key.substr(0,1)&&(r.Key=r.Key.substr(1)),p+=t,l.options.EnableReporter&&(s=l.options.UseAccelerate||"string"==typeof l.options.Domain&&l.options.Domain.includes("accelerate."),r.tracker=new y({Beacon:l.options.BeaconReporter,clsReporter:l.options.ClsReporter,bucket:r.Bucket,region:r.Region,apiName:"uploadFiles",realApi:d<t?"sliceUploadFile":"putObject",fileKey:r.Key,fileSize:t,accelerate:s,deepTracker:l.options.DeepTracker,customId:l.options.CustomId,delay:l.options.TrackerDelay})),B.each(r,function(e,t){"object"!==m(e)&&"function"!=typeof e&&(o[t]=e)}),n=r.onTaskReady,r.onTaskReady=function(e){o.TaskId=e,n&&n(e)},i=0,a=r.onProgress,r.onProgress=function(e){h=h-i+e.loaded,i=e.loaded,a&&a(e),f({loaded:h,total:p})},s=d<t?"sliceUploadFile":"putObject",c=r.onFileFinish,g.push({api:s,params:r,callback:function(e,t){r.tracker&&r.tracker.report(e,t),c&&c(e,t),u(e,t,o)}})}),l._addTasks(g)},sliceCopyFile:function(c,u){var e,t,r,o,l,n,s,d,p,h,f,i,g,m,y=new R,k=this,C=c.Bucket,v=c.Region,b=c.Key,S=c.CopySource,a=B.getSourceParams.call(this,S);a?(e=a.Bucket,t=a.Region,r=decodeURIComponent(a.Key),o=(void 0===c.CopySliceSize?k.options:c).CopySliceSize,o=Math.max(0,o),l=c.CopyChunkSize||this.options.CopyChunkSize,n=this.options.CopyChunkParallelLimit,s=this.options.ChunkRetryTimes+1,p=d=0,i={},g={},m={},y.on("copy_slice_complete",function(r){B.each(c.Headers,function(e,t){0===t.toLowerCase().indexOf("x-cos-meta-")&&(t,0)});var t=B.map(r.PartList,function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});T.retry(s,function(e){k.multipartComplete({Bucket:C,Region:v,Key:b,UploadId:r.UploadId,Parts:t,tracker:c.tracker,calledBySdk:"sliceCopyFile"},e)},function(e,t){if(x.removeUsing(r.UploadId),e)return f(null,!0),u(e);x.removeUploadId(r.UploadId),f({loaded:h,total:h},!0),u(null,t)})}),y.on("get_copy_data_finish",function(a){var e=x.getCopyFileId(S,i,l,C,b),e=(e&&x.saveUploadId(e,a.UploadId,k.options.UploadIdCacheLimit),x.setUsing(a.UploadId),B.filter(a.PartList,function(e){return e.Uploaded&&(p+=e.PartNumber>=d&&h%l||l),!e.Uploaded}));T.eachLimit(e,n,function(r,o){var t=r.PartNumber,n=r.CopySourceRange,i=r.end-r.start;T.retry(s,function(e){!function(e,r){var t=e.TaskId,o=e.Bucket,n=e.Region,i=e.Key,a=e.CopySource,s=e.UploadId,c=+e.PartNumber,u=e.CopySourceRange,l=this.options.ChunkRetryTimes+1,d=this;T.retry(l,function(r){d.uploadPartCopy({TaskId:t,Bucket:o,Region:n,Key:i,CopySource:a,UploadId:s,PartNumber:c,CopySourceRange:u,tracker:e.tracker,calledBySdk:e.calledBySdk},function(e,t){r(e||null,t)})},function(e,t){return r(e,t)})}.call(k,{Bucket:C,Region:v,Key:b,CopySource:S,UploadId:a.UploadId,PartNumber:t,CopySourceRange:n,tracker:c.tracker,calledBySdk:"sliceCopyFile"},e)},function(e,t){if(e)return o(e);f({loaded:p+=i,total:h}),r.ETag=t.ETag,o(e||null,t)})},function(e){if(e)return x.removeUsing(a.UploadId),f(null,!0),u(e);y.emit("copy_slice_complete",a)})}),y.on("get_chunk_size_finish",function(){var e=function(){k.multipartInit({Bucket:C,Region:v,Key:b,Headers:m,tracker:c.tracker,calledBySdk:"sliceCopyFile"},function(e,t){if(e)return u(e);c.UploadId=t.UploadId,y.emit("get_copy_data_finish",{UploadId:c.UploadId,PartList:c.PartList})})},t=x.getCopyFileId(S,i,l,C,b),o=x.getUploadIdList(t);if(!t||!o)return e();(function r(i){var a;return i>=o.length?e():(a=o[i],x.using[a]?r(i+1):void A.call(k,{Bucket:C,Region:v,Key:b,UploadId:a,tracker:c.tracker,calledBySdk:"sliceCopyFile"},function(e,t){if(e)x.removeUploadId(a),r(i+1);else{if(x.using[a])return r(i+1);var o={},n=0;B.each(t.PartList,function(e){var t=parseInt(e.Size),r=n+t-1;o[e.PartNumber+"|"+n+"|"+r]=e.ETag,n+=t}),B.each(c.PartList,function(e){var t=o[e.PartNumber+"|"+e.start+"|"+e.end];t&&(e.ETag=t,e.Uploaded=!0)}),y.emit("get_copy_data_finish",{UploadId:a,PartList:c.PartList})}}))})(0)}),y.on("get_file_size_finish",function(){for(var e=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],t=1048576,r=0;r<e.length&&!(h/(t=1024*e[r]*1024)<=k.options.MaxPartNumber);r++);c.ChunkSize=l=Math.max(l,t),d=Math.ceil(h/l);for(var o=[],n=1;n<=d;n++){var i=(n-1)*l,a=n*l<h?n*l-1:h-1;o.push({PartNumber:n,start:i,end:a,CopySourceRange:"bytes="+i+"-"+a})}if(c.PartList=o,(m="Replaced"===c.Headers["x-cos-metadata-directive"]?c.Headers:g)["x-cos-storage-class"]=c.Headers["x-cos-storage-class"]||g["x-cos-storage-class"],m=B.clearKey(m),"ARCHIVE"===g["x-cos-storage-class"]||"DEEP_ARCHIVE"===g["x-cos-storage-class"]){var s=g["x-cos-restore"];if(!s||'ongoing-request="true"'===s)return void u(B.error(new Error("Unrestored archive object is not allowed to be copied")))}delete m["x-cos-copy-source"],delete m["x-cos-metadata-directive"],delete m["x-cos-copy-source-If-Modified-Since"],delete m["x-cos-copy-source-If-Unmodified-Since"],delete m["x-cos-copy-source-If-Match"],delete m["x-cos-copy-source-If-None-Match"],y.emit("get_chunk_size_finish")}),k.headObject({Bucket:e,Region:t,Key:r,tracker:c.tracker,calledBySdk:"sliceCopyFile"},function(e,t){e?e.statusCode&&404===e.statusCode?u(B.error(e,{ErrorStatus:r+" Not Exist"})):u(e):void 0!==(h=c.FileSize=t.headers["content-length"])&&h?(c.tracker&&c.tracker.setParams({httpSize:h}),f=B.throttleOnProgress.call(k,h,c.onProgress),h<=o?(c.Headers["x-cos-metadata-directive"]||(c.Headers["x-cos-metadata-directive"]="Copy"),k.putObjectCopy(Object.assign(c,{calledBySdk:"sliceCopyFile"}),function(e,t){if(e)return f(null,!0),u(e);f({loaded:h,total:h},!0),u(e,t)})):(e=t.headers,g={"Cache-Control":(i=e)["cache-control"],"Content-Disposition":e["content-disposition"],"Content-Encoding":e["content-encoding"],"Content-Type":e["content-type"],Expires:e.expires,"x-cos-storage-class":e["x-cos-storage-class"]},B.each(e,function(e,t){var r="x-cos-meta-";0===t.indexOf(r)&&t.length>r.length&&(g[t]=e)}),y.emit("get_file_size_finish"))):u(B.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')))})):u(B.error(new Error("CopySource format error")))}};e.exports.init=function(r,e){e.transferToTaskMethod(o,"sliceUploadFile"),B.each(o,function(e,t){r.prototype[t]=B.apiWrapper(t,e)})}},"./src/async.js":function(e,t){e.exports={eachLimit:function(r,e,o,n){if(n=n||function(){},!r.length||e<=0)return n();var i=0,a=0,s=0;!function t(){if(i>=r.length)return n();for(;s<e&&a<r.length;)s+=1,o(r[(a+=1)-1],function(e){e?(n(e),n=function(){}):(--s,((i+=1)>=r.length?n:t)())})}()},retry:function(o,e,n){function i(r){e(function(e,t){e&&r<o?i(r+1):n(e,t)})}o<1?n():i(1)}}},"./src/base.js":function(e,t,r){var c=r("./node_modules/@babel/runtime/helpers/typeof.js"),g=r("./lib/request.js"),S=r("./src/util.js");function o(e,t,r){var o=S.clone(t.InventoryConfiguration),n=(o.OptionalFields&&(n=o.OptionalFields||[],o.OptionalFields={Field:n}),o.Destination&&o.Destination.COSBucketDestination&&o.Destination.COSBucketDestination.Encryption&&(n=o.Destination.COSBucketDestination.Encryption,-1<Object.keys(n).indexOf("SSECOS"))&&(n["SSE-COS"]=n.SSECOS,delete n.SSECOS),S.json2xml({InventoryConfiguration:o})),o=t.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(n)),l.call(this,{Action:"PUT"===e?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory",method:e,Bucket:t.Bucket,Region:t.Region,body:n,action:"inventory",qs:{id:t.Id},headers:o,tracker:t.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})}function i(r){var o={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},e=(e=(r&&r.AccessControlList||{}).Grant)&&(S.isArray(e)?e:[e]),i={READ:0,WRITE:0,FULL_CONTROL:0};return e&&e.length&&S.each(e,function(e){var t=e.Grantee.URI&&e.Grantee.URI.endsWith("/groups/global/AllUsers");"qcs::cam::anyone:anyone"===e.Grantee.ID||t?i[e.Permission]=1:e.Grantee.ID!==r.Owner.ID&&o[n[e.Permission]].push('id="'+e.Grantee.ID+'"')}),o.ACL=i.FULL_CONTROL||i.WRITE&&i.READ?"public-read-write":i.READ?"public-read":"private",S.each(n,function(e){o[e]=a(o[e].join(","))}),o}function a(e){for(var t,r=e.split(","),o={},n=0;n<r.length;)o[t=r[n].trim()]?r.splice(n,1):(o[t]=!0,r[n]=t,n++);return r.join(",")}function m(e){var t=e.region||"",r=e.bucket||"",o=r.substr(0,r.lastIndexOf("-")),n=r.substr(r.lastIndexOf("-")+1),i=e.domain,a=e.object,s=("function"==typeof i&&(i=i({Bucket:r,Region:t})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":"),e.protocol||(S.isBrowser&&"object"===("undefined"==typeof location?"undefined":c(location))&&"http:"===location.protocol?"http:":"https:")),n=(i=(i=(i=i||(i=-1<["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(t)?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle)?i:"{Bucket}."+i).replace(/\{\{AppId\}\}/gi,n).replace(/\{\{Bucket\}\}/gi,o).replace(/\{\{Region\}\}/gi,t).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,n).replace(/\{BucketName\}/gi,o).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,t).replace(/\{.*?\}/gi,""),i="/"===(i=/^[a-zA-Z]+:\/\//.test(i)?i:s+"//"+i).slice(-1)?i.slice(0,-1):i);return e.ForcePathStyle&&(n+="/"+r),n+="/",a&&(n+=S.camSafeUrlEncode(a).replace(/%2F/g,"/")),n=e.isLocation?n.replace(/^https?:\/\//,""):n}var n=function(e){var t;return e.Bucket&&e.Region?(t=(void 0===e.UseAccelerate?this.options:e).UseAccelerate,(e.Url||m({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:t?"accelerate":e.Region})).replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1")):""};function h(t,r){var e,o=S.clone(t.Headers),n="",i=(S.each(o,function(e,t){(""===e||-1<["content-type","cache-control","expires"].indexOf(t.toLowerCase()))&&delete o[t],"host"===t.toLowerCase()&&(n=e)}),!1!==t.ForceSignHost),a=(!n&&t.SignHost&&i&&(o.Host=t.SignHost),!1),s=function(e,t){a||(a=!0,t&&t.XCosSecurityToken&&!t.SecurityToken&&((t=S.clone(t)).SecurityToken=t.XCosSecurityToken,delete t.XCosSecurityToken),r&&r(e,t))},c=this,u=t.Bucket||"",l=t.Region||"",d=t.Key||"",p="/"+(d=c.options.ForcePathStyle&&u?u+"/"+d:d),h={},f=t.Scope,g=(f||(b=t.Action||"",e=t.ResourceKey||t.Key||"",f=t.Scope||[{action:b,bucket:u,region:l,prefix:e}]),S.md5(JSON.stringify(f)));c._StsCache=c._StsCache||[];for(var m=c._StsCache.length-1;0<=m;m--){var y=c._StsCache[m],k=Math.round(S.getSkewTime(c.options.SystemClockOffset)/1e3)+30;if(y.StartTime&&k<y.StartTime||k>=y.ExpiredTime)c._StsCache.splice(m,1);else if(!y.ScopeLimit||y.ScopeLimit&&y.ScopeKey===g){h=y;break}}function C(){var e="";h.StartTime&&t.Expires?e=h.StartTime+";"+(h.StartTime+ +t.Expires):h.StartTime&&h.ExpiredTime&&(e=h.StartTime+";"+h.ExpiredTime),e={Authorization:S.getAuth({SecretId:h.TmpSecretId,SecretKey:h.TmpSecretKey,Method:t.Method,Pathname:p,Query:t.Query,Headers:o,Expires:t.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,KeyTime:e,ForceSignHost:i}),SecurityToken:h.SecurityToken||h.XCosSecurityToken||"",Token:h.Token||"",ClientIP:h.ClientIP||"",ClientUA:h.ClientUA||"",SignFrom:"client"},s(null,e)}function v(e){if(e.Authorization){var t=!1,r=e.Authorization;if(r)if(-1<r.indexOf(" "))t=!1;else if(-1<r.indexOf("q-sign-algorithm=")&&-1<r.indexOf("q-ak=")&&-1<r.indexOf("q-sign-time=")&&-1<r.indexOf("q-key-time=")&&-1<r.indexOf("q-url-param-list="))t=!0;else try{-1<(r=atob(r)).indexOf("a=")&&-1<r.indexOf("k=")&&-1<r.indexOf("t=")&&-1<r.indexOf("r=")&&-1<r.indexOf("b=")&&(t=!0)}catch(e){}if(!t)return S.error(new Error("getAuthorization callback params format error"))}else{if(!e.TmpSecretId)return S.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!e.TmpSecretKey)return S.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!e.SecurityToken&&!e.XCosSecurityToken)return S.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!e.ExpiredTime)return S.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(e.ExpiredTime&&10!==e.ExpiredTime.toString().length)return S.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(e.StartTime&&10!==e.StartTime.toString().length)return S.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1}if(h.ExpiredTime&&60<h.ExpiredTime-S.getSkewTime(c.options.SystemClockOffset)/1e3)C();else if(c.options.getAuthorization)c.options.getAuthorization.call(c,{Bucket:u,Region:l,Method:t.Method,Key:d,Pathname:p,Query:t.Query,Headers:o,Scope:f,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:i},function(e){var t=v(e="string"==typeof e?{Authorization:e}:e);if(t)return s(t);e.Authorization?s(null,e):((h=e||{}).Scope=f,h.ScopeKey=g,c._StsCache.push(h),C())});else{if(!c.options.getSTS){var b="";if(c.options.StartTime&&t.Expires){if(10!==c.options.StartTime.toString().length)return s(S.error(new Error('params "StartTime" should be 10 digits')));b=c.options.StartTime+";"+(c.options.StartTime+ +t.Expires)}else if(c.options.StartTime&&c.options.ExpiredTime){if(10!==c.options.StartTime.toString().length)return s(S.error(new Error('params "StartTime" should be 10 digits')));if(10!==c.options.ExpiredTime.toString().length)return s(S.error(new Error('params "ExpiredTime" should be 10 digits')));b=c.options.StartTime+";"+ +c.options.ExpiredTime}return b={Authorization:S.getAuth({SecretId:t.SecretId||c.options.SecretId,SecretKey:t.SecretKey||c.options.SecretKey,Method:t.Method,Pathname:p,Query:t.Query,Headers:o,Expires:t.Expires,KeyTime:b,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:i}),SecurityToken:c.options.SecurityToken||c.options.XCosSecurityToken,SignFrom:"client"},s(null,b),b}c.options.getSTS.call(c,{Bucket:u,Region:l},function(e){(h=e||{}).Scope=f,h.ScopeKey=g,h.TmpSecretId||(h.TmpSecretId=h.SecretId),h.TmpSecretKey||(h.TmpSecretKey=h.SecretKey);e=v(h);if(e)return s(e);c._StsCache.push(h),C()})}return""}function l(u,l){var d=this,e=(u.headers||(u.headers={}),u.qs||(u.qs={}),u.VersionId&&(u.qs.versionId=u.VersionId),u.qs=S.clearKey(u.qs),u.headers&&(u.headers=S.clearKey(u.headers)),u.qs&&(u.qs=S.clearKey(u.qs)),S.clone(u.qs)),t=(u.action&&(e[u.action]=""),u.url||u.Url),r=u.SignHost||n.call(this,{Bucket:u.Bucket,Region:u.Region,Url:t}),p=u.tracker;(function a(s){var c=d.options.SystemClockOffset;p&&p.setParams({signStartTime:(new Date).getTime(),httpRetryTimes:s-1}),u.SwitchHost&&(r=r.replace(/myqcloud.com/,"tencentcos.cn")),h.call(d,{Bucket:u.Bucket||"",Region:u.Region||"",Method:u.method,Key:u.Key,Query:e,Headers:u.headers,SignHost:r,Action:u.Action,ResourceKey:u.ResourceKey,Scope:u.Scope,ForceSignHost:d.options.ForceSignHost,SwitchHost:u.SwitchHost},function(e,i){e?l(e):(p&&p.setParams({signEndTime:(new Date).getTime(),httpStartTime:(new Date).getTime()}),u.AuthData=i,function(s,c){var e,u,t,l,r,o,n,i,a,d,p,h=this,f=s.TaskId;f&&!h._isRunningTask(f)||(t=s.Bucket,a=s.Region,o=s.Key,n=s.method||"GET",i=s.Url||s.url,e=s.body,u=s.rawBody,h.options.UseAccelerate&&(a="accelerate"),i=i||m({ForcePathStyle:h.options.ForcePathStyle,protocol:h.options.Protocol,domain:h.options.Domain,bucket:t,region:a,object:o}),s.SwitchHost&&(i=i.replace(/myqcloud.com/,"tencentcos.cn")),t=o?i:"",s.action&&(i=i+"?"+(S.isIOS_QQ?"".concat(s.action,"="):s.action)),s.qsStr&&(i=-1<i.indexOf("?")?i+"&"+s.qsStr:i+"?"+s.qsStr),l={method:n,url:i,headers:s.headers,qs:s.qs,body:e},a="x-cos-security-token",S.isCIHost(i)&&(a="x-ci-security-token"),l.headers.Authorization=s.AuthData.Authorization,s.AuthData.Token&&(l.headers.token=s.AuthData.Token),s.AuthData.ClientIP&&(l.headers.clientIP=s.AuthData.ClientIP),s.AuthData.ClientUA&&(l.headers.clientUA=s.AuthData.ClientUA),s.AuthData.SecurityToken&&(l.headers[a]=s.AuthData.SecurityToken),s.Action&&(l.action=s.Action),l.key=s.Key||s.ResourceKey,l.headers&&(l.headers=S.clearKey(l.headers)),s.retry&&(l.headers["x-cos-sdk-retry"]=!0),l=S.clearKey(l),s.onProgress&&"function"==typeof s.onProgress&&(r=e&&(e.size||e.length)||0,l.onProgress=function(e){f&&!h._isRunningTask(f)||(e=e?e.loaded:0,s.onProgress({loaded:e,total:r}))}),s.onDownloadProgress&&(l.onDownloadProgress=s.onDownloadProgress),s.DataType&&(l.dataType=s.DataType),this.options.Timeout&&(l.timeout=this.options.Timeout),h.options.ForcePathStyle&&(l.pathStyle=h.options.ForcePathStyle),h.emit("before-send",l),o=l.url.includes("accelerate."),n=l.qs?Object.keys(l.qs).map(function(e){return"".concat(e,"=").concat(l.qs[e])}).join("&"):"",i=n?l.url+"?"+n:l.url,s.tracker&&(s.tracker.setParams({url:i,httpMethod:l.method,accelerate:o,httpSize:(null==(a=l.body)?void 0:a.size)||0}),s.tracker.parent)&&!s.tracker.parent.params.url&&s.tracker.parent.setParams({url:t,accelerate:o}),d=(h.options.Request||g)(l,function(e){if(!e||"abort"!==e.error){var i,e={options:l,error:e&&e.error,statusCode:e&&e.statusCode||0,statusMessage:e&&e.statusMessage||"",headers:e&&e.headers||{},body:e&&e.body},t=(h.emit("after-receive",e),e.error),r=e.body,a={statusCode:e.statusCode,statusMessage:e.statusMessage,headers:e.headers},o=function(e,t){if(f&&h.off("inner-kill-task",p),!i){i=!0;var r={};if(a&&a.statusCode&&(r.statusCode=a.statusCode),a&&a.headers&&(r.headers=a.headers),e)l.url&&(r.url=l.url),l.method&&(r.method=l.method),e=S.extend(e||{},r),c(e,null);else{if("name/cos:PutObject"===s.Action){var o,n={};for(o in s.headers)n[o.toLowerCase()]=s.headers[o];n["x-cos-callback"]?t.Error?(t.CallbackError=S.clone(t.Error),delete t.Error):t.CallbackBody=S.clone(t):n["x-cos-return-body"]&&(t.Error?(t.ReturnError=S.clone(t.Error),delete t.Error):t.ReturnBody=S.clone(t))}t=S.extend(t||{},r),c(null,t)}d=null}};if(t)return o(S.error(t));e=a.statusCode,t=2===Math.floor(e/100);if(u){if(t)return o(null,{body:r});if(r instanceof Blob)return void S.readAsBinaryString(r,function(e){e=S.parseResBody(e),e=e.Error||e;return o(S.error(new Error(e.Message||"response body error"),{code:e.Code,error:e}))})}var r=S.parseResBody(r),n=r.Error||r;t?o(null,r):n?o(S.error(new Error(n.Message),{code:n.Code,error:n})):e&&o(S.error(new Error(a.statusMessage),{code:""+e}))}}),p=function e(t){t.TaskId===f&&(d&&d.abort&&d.abort(),h.off("inner-kill-task",e))},f&&h.on("inner-kill-task",p))}.call(d,u,function(e,t){p&&p.setParams({httpEndTime:(new Date).getTime()});var r,o=!1,n=!1;e&&(o=(r=function(e){var t=!1,r=!1,o=!1,n=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var i=e.error.Code,a=e.error.Message;("RequestTimeTooSkewed"===i||"AccessDenied"===i&&"Request has expired"===a)&&(r=!0)}catch(e){}return e&&(r&&n?(i=Date.parse(n),this.options.CorrectClockSkew&&3e4<=Math.abs(S.getSkewTime(this.options.SystemClockOffset)-i)&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=i-Date.now(),t=!0)):5===Math.floor(e.statusCode/100)?t=!0:"CORS blocked or network error"===e.message&&(o=!0,t=this.options.AutoSwitchHost)),{canRetry:t,networkError:o}}.call(d,e)).canRetry||c!==d.options.SystemClockOffset,n=r.networkError),e&&s<2&&o?(u.headers&&(delete u.headers.Authorization,delete u.headers.token,delete u.headers.clientIP,delete u.headers.clientUA,u.headers["x-cos-security-token"]&&delete u.headers["x-cos-security-token"],u.headers["x-ci-security-token"])&&delete u.headers["x-ci-security-token"],r=function(e){var t=e.requestUrl,r=e.clientCalcSign,e=e.networkError;return!!this.options.AutoSwitchHost&&!!t&&!!r&&!!e&&/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/.test(t)&&!/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/.test(t)}.call(d,{requestUrl:(null==e?void 0:e.url)||"",clientCalcSign:"client"===i.SignFrom,networkError:n}),u.SwitchHost=r,u.retry=!0,a(s+1)):l(e,t)}))})})(1)}var s={getService:function(e,o){var t=this.options.Protocol||(S.isBrowser&&"object"===("undefined"==typeof location?"undefined":c(location))&&"http:"===location.protocol?"http:":"https:"),r=this.options.ServiceDomain,n=e.AppId||this.options.appId,i=e.Region,n=(r?(r=r.replace(/\{\{AppId\}\}/gi,n||"").replace(/\{\{Region\}\}/gi,i||"").replace(/\{\{.*?\}\}/gi,""),"/"===(r=/^[a-zA-Z]+:\/\//.test(r)?r:t+"//"+r).slice(-1)&&(r=r.slice(0,-1))):r=i?t+"//cos."+i+".myqcloud.com":t+"//service.cos.myqcloud.com",""),t=i?"cos."+i+".myqcloud.com":"service.cos.myqcloud.com",i=r.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");l.call(this,{Action:"name/cos:GetService",url:r,method:"GET",headers:e.Headers,SignHost:n=t===i?t:n,tracker:e.tracker},function(e,t){if(e)return o(e);var e=t&&t.ListAllMyBucketsResult&&t.ListAllMyBucketsResult.Buckets&&t.ListAllMyBucketsResult.Buckets.Bucket||[],e=S.isArray(e)?e:[e],r=t&&t.ListAllMyBucketsResult&&t.ListAllMyBucketsResult.Owner||{};o(null,{Buckets:e,Owner:r,statusCode:t.statusCode,headers:t.headers})})},putBucket:function(r,o){var e,n=this,t="";r.BucketAZConfig&&(e={BucketAZConfig:r.BucketAZConfig},t=S.json2xml({CreateBucketConfiguration:e})),l.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,body:t,tracker:r.tracker},function(e,t){if(e)return o(e);e=m({protocol:n.options.Protocol,domain:n.options.Domain,bucket:r.Bucket,region:r.Region,isLocation:!0});o(null,{Location:e,statusCode:t.statusCode,headers:t.headers})})},headBucket:function(e,t){l.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},t)},getBucket:function(e,n){var t={};t.prefix=e.Prefix||"",t.delimiter=e.Delimiter,t.marker=e.Marker,t["max-keys"]=e.MaxKeys,t["encoding-type"]=e.EncodingType,l.call(this,{Action:"name/cos:GetBucket",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t,tracker:e.tracker},function(e,t){if(e)return n(e);var e=t.ListBucketResult||{},r=e.Contents||[],o=e.CommonPrefixes||[],r=S.isArray(r)?r:[r],o=S.isArray(o)?o:[o],e=S.clone(e);S.extend(e,{Contents:r,CommonPrefixes:o,statusCode:t.statusCode,headers:t.headers}),n(null,e)})},deleteBucket:function(e,r){l.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketAcl:function(e,r){var t,o,n=e.Headers,i="";e.AccessControlPolicy&&(o=(t=S.clone(e.AccessControlPolicy||{})).Grants||t.Grant,o=S.isArray(o)?o:[o],delete t.Grant,delete t.Grants,t.AccessControlList={Grant:o},i=S.json2xml({AccessControlPolicy:t}),n["Content-Type"]="application/xml",n["Content-MD5"]=S.b64(S.md5(i))),S.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=a(n[t]))}),l.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:i,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketAcl:function(e,n){l.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(e,t){if(e)return n(e);var e=t.AccessControlPolicy||{},r=e.Owner||{},o=e.AccessControlList.Grant||[],o=S.isArray(o)?o:[o],e=i(e);t.headers&&t.headers["x-cos-acl"]&&(e.ACL=t.headers["x-cos-acl"]),e=S.extend(e,{Owner:r,Grants:o,statusCode:t.statusCode,headers:t.headers}),n(null,e)})},putBucketCors:function(e,r){var t=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[],t=S.clone(S.isArray(t)?t:[t]),t=(S.each(t,function(o){S.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(e){var t=e+"s",r=o[t]||o[e]||[];delete o[t],o[e]=S.isArray(r)?r:[r]})}),{CORSRule:t}),t=(e.ResponseVary&&(t.ResponseVary=e.ResponseVary),S.json2xml({CORSConfiguration:t})),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"cors",headers:o,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketCors:function(e,o){l.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(e,t){var r;e?404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code?(r={CORSRules:[],statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):o(e):(e=(r=t.CORSConfiguration||{}).CORSRules||r.CORSRule||[],e=S.clone(S.isArray(e)?e:[e]),r=r.ResponseVary,S.each(e,function(o){S.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(e){var t=e+"s",r=o[t]||o[e]||[];delete o[e],o[t]=S.isArray(r)?r:[r]})}),o(null,{CORSRules:e,ResponseVary:r,statusCode:t.statusCode,headers:t.headers}))})},deleteBucketCors:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode||e.statusCode,headers:t.headers})})},getBucketLocation:function(e,t){l.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},t)},getBucketPolicy:function(e,r){l.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(e,t){if(e)return e.statusCode&&403===e.statusCode?r(S.error(e,{ErrorStatus:"Access Denied"})):e.statusCode&&405===e.statusCode?r(S.error(e,{ErrorStatus:"Method Not Allowed"})):e.statusCode&&404===e.statusCode?r(S.error(e,{ErrorStatus:"Policy Not Found"})):r(e);e={};try{e=JSON.parse(t.body)}catch(e){}r(null,{Policy:e,statusCode:t.statusCode,headers:t.headers})})},putBucketPolicy:function(e,r){var t=e.Policy;try{"string"==typeof t&&(t=JSON.parse(t))}catch(e){}if(!t||"string"==typeof t)return r(S.error(new Error("Policy format error")));var o=JSON.stringify(t);t.version||(t.version="2.0"),(t=e.Headers)["Content-Type"]="application/json",t["Content-MD5"]=S.b64(S.md5(o)),l.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:o,headers:t,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},deleteBucketPolicy:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode||e.statusCode,headers:t.headers})})},putBucketTagging:function(e,r){var t=(t=e.Tagging||{}).TagSet||t.Tags||e.Tags||[],t=S.clone(S.isArray(t)?t:[t]),t=S.json2xml({Tagging:{TagSet:{Tag:t}}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"tagging",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketTagging:function(e,o){l.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(e,t){var r;if(e)404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code?o(e):(r={Tags:[],statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r));else{e=[];try{e=t.Tagging.TagSet.Tag||[]}catch(e){}e=S.clone(S.isArray(e)?e:[e]),o(null,{Tags:e,statusCode:t.statusCode,headers:t.headers})}})},deleteBucketTagging:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketLifecycle:function(e,r){var t=(e.LifecycleConfiguration||{}).Rules||e.Rules||[],t=S.clone(t),t=S.json2xml({LifecycleConfiguration:{Rule:t}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"lifecycle",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketLifecycle:function(e,o){l.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(e,t){if(e)404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code?(r={Rules:[],statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):o(e);else{var r=[];try{r=t.LifecycleConfiguration.Rule||[]}catch(e){}r=S.clone(S.isArray(r)?r:[r]),o(null,{Rules:r,statusCode:t.statusCode,headers:t.headers})}})},deleteBucketLifecycle:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketVersioning:function(e,r){var t,o;e.VersioningConfiguration?(t=e.VersioningConfiguration||{},t=S.json2xml({VersioningConfiguration:t}),(o=e.Headers)["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"versioning",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})):r(S.error(new Error("missing param VersioningConfiguration")))},getBucketVersioning:function(e,r){l.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(e,t){e||t.VersioningConfiguration||(t.VersioningConfiguration={}),r(e,t)})},putBucketReplication:function(e,r){var t=S.clone(e.ReplicationConfiguration),o=(t=(t=(t=S.json2xml({ReplicationConfiguration:t})).replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>"),e.Headers);o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"replication",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketReplication:function(e,o){l.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(e,t){var r;e?404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code?o(e):(r={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):(t.ReplicationConfiguration||(t.ReplicationConfiguration={}),t.ReplicationConfiguration.Rule&&(t.ReplicationConfiguration.Rules=S.makeArray(t.ReplicationConfiguration.Rule),delete t.ReplicationConfiguration.Rule),o(e,t))})},deleteBucketReplication:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketWebsite:function(e,r){var t,o;e.WebsiteConfiguration?(t=(o=S.clone(e.WebsiteConfiguration||{})).RoutingRules||o.RoutingRule||[],t=S.isArray(t)?t:[t],delete o.RoutingRule,delete o.RoutingRules,t.length&&(o.RoutingRules={RoutingRule:t}),t=S.json2xml({WebsiteConfiguration:o}),(o=e.Headers)["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"website",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})):r(S.error(new Error("missing param WebsiteConfiguration")))},getBucketWebsite:function(e,o){l.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(e,t){var r;e?404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code?(r={WebsiteConfiguration:{},statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):o(e):((r=t.WebsiteConfiguration||{}).RoutingRules&&(e=S.clone(r.RoutingRules.RoutingRule||[]),e=S.makeArray(e),r.RoutingRules=e),o(null,{WebsiteConfiguration:r,statusCode:t.statusCode,headers:t.headers}))})},deleteBucketWebsite:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketReferer:function(e,r){var t,o;e.RefererConfiguration?(t=(t=(o=S.clone(e.RefererConfiguration||{})).DomainList||{}).Domains||t.Domain||[],(t=S.isArray(t)?t:[t]).length&&(o.DomainList={Domain:t}),t=S.json2xml({RefererConfiguration:o}),(o=e.Headers)["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"referer",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})):r(S.error(new Error("missing param RefererConfiguration")))},getBucketReferer:function(e,o){l.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(e,t){var r;e?404===e.statusCode&&"NoSuchRefererConfiguration"===e.error.Code?(r={WebsiteConfiguration:{},statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):o(e):((r=t.RefererConfiguration||{}).DomainList&&(e=S.makeArray(r.DomainList.Domain||[]),r.DomainList={Domains:e}),o(null,{RefererConfiguration:r,statusCode:t.statusCode,headers:t.headers}))})},putBucketDomain:function(e,r){var t=(e.DomainConfiguration||{}).DomainRule||e.DomainRule||[],t=S.clone(t),t=S.json2xml({DomainConfiguration:{DomainRule:t}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"domain",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketDomain:function(e,r){l.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(e,t){if(e)return r(e);e=[];try{e=t.DomainConfiguration.DomainRule||[]}catch(e){}e=S.clone(S.isArray(e)?e:[e]),r(null,{DomainRule:e,statusCode:t.statusCode,headers:t.headers})})},deleteBucketDomain:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketOrigin:function(e,r){var t=(e.OriginConfiguration||{}).OriginRule||e.OriginRule||[],t=S.clone(t),t=S.json2xml({OriginConfiguration:{OriginRule:t}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"origin",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketOrigin:function(e,r){l.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(e,t){if(e)return r(e);e=[];try{e=t.OriginConfiguration.OriginRule||[]}catch(e){}e=S.clone(S.isArray(e)?e:[e]),r(null,{OriginRule:e,statusCode:t.statusCode,headers:t.headers})})},deleteBucketOrigin:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketLogging:function(e,r){var t=S.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"logging",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketLogging:function(e,r){l.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{BucketLoggingStatus:t.BucketLoggingStatus,statusCode:t.statusCode,headers:t.headers})})},putBucketInventory:function(e,t){return o.call(this,"PUT",e,t)},postBucketInventory:function(e,t){return o.call(this,"POST",e,t)},getBucketInventory:function(e,o){l.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(e,t){if(e)return o(e);var r,e=t.InventoryConfiguration;e&&e.OptionalFields&&e.OptionalFields.Field&&(r=e.OptionalFields.Field,S.isArray(r)||(r=[r]),e.OptionalFields=r),e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption&&(r=e.Destination.COSBucketDestination.Encryption,-1<Object.keys(r).indexOf("SSE-COS"))&&(r.SSECOS=r["SSE-COS"],delete r["SSE-COS"]),o(null,{InventoryConfiguration:e,statusCode:t.statusCode,headers:t.headers})})},listBucketInventory:function(e,o){l.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(e,t){if(e)return o(e);var e=t.ListInventoryConfigurationResult,r=e.InventoryConfiguration||[],r=S.isArray(r)?r:[r];delete e.InventoryConfiguration,S.each(r,function(e){var t;e&&e.OptionalFields&&e.OptionalFields.Field&&(t=e.OptionalFields.Field,S.isArray(t)||(t=[t]),e.OptionalFields=t),e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption&&(t=e.Destination.COSBucketDestination.Encryption,-1<Object.keys(t).indexOf("SSE-COS"))&&(t.SSECOS=t["SSE-COS"],delete t["SSE-COS"])}),e.InventoryConfigurations=r,S.extend(e,{statusCode:t.statusCode,headers:t.headers}),o(null,e)})},deleteBucketInventory:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},putBucketAccelerate:function(e,r){var t,o;e.AccelerateConfiguration?(t={AccelerateConfiguration:e.AccelerateConfiguration||{}},t=S.json2xml(t),(o={"Content-Type":"application/xml"})["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"accelerate",headers:o,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{statusCode:t.statusCode,headers:t.headers})})):r(S.error(new Error("missing param AccelerateConfiguration")))},getBucketAccelerate:function(e,r){l.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(e,t){e||t.AccelerateConfiguration||(t.AccelerateConfiguration={}),r(e,t)})},putBucketEncryption:function(e,r){var t=(t=e.ServerSideEncryptionConfiguration||{}).Rule||t.Rules||[],t=S.json2xml({ServerSideEncryptionConfiguration:{Rule:t}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"encryption",headers:o,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getBucketEncryption:function(e,o){l.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(e,t){var r;e?404===e.statusCode&&"NoSuchEncryptionConfiguration"===e.code?(r={EncryptionConfiguration:{Rules:[]},statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r)):o(e):(r=S.makeArray(t.EncryptionConfiguration&&t.EncryptionConfiguration.Rule||[]),t.EncryptionConfiguration={Rules:r},o(e,t))})},deleteBucketEncryption:function(e,r){l.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getObject:function(o,n){var e,t,i,r;this.options.ObjectKeySimplifyCheck&&"/"===S.simplifyPath(o.Key)?n(S.error(new Error("The Getobject Key is illegal"))):(e=o.Query||{},t=o.QueryString||"",i=S.throttleOnProgress.call(this,0,o.onProgress),(r=o.tracker)&&r.setParams({signStartTime:(new Date).getTime()}),e["response-content-type"]=o.ResponseContentType,e["response-content-language"]=o.ResponseContentLanguage,e["response-expires"]=o.ResponseExpires,e["response-cache-control"]=o.ResponseCacheControl,e["response-content-disposition"]=o.ResponseContentDisposition,e["response-content-encoding"]=o.ResponseContentEncoding,l.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,DataType:o.DataType,headers:o.Headers,qs:e,qsStr:t,rawBody:!0,onDownloadProgress:i,tracker:r},function(e,t){var r;if(i(null,!0),e)return r=e.statusCode,o.Headers["If-Modified-Since"]&&r&&304===r?n(null,{NotModified:!0}):n(e);n(null,{Body:t.body,ETag:S.attr(t.headers,"etag",""),statusCode:t.statusCode,headers:t.headers})}))},headObject:function(o,n){l.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,headers:o.Headers,tracker:o.tracker},function(e,t){var r;if(e)return r=e.statusCode,o.Headers["If-Modified-Since"]&&r&&304===r?n(null,{NotModified:!0,statusCode:r}):n(e);t.ETag=S.attr(t.headers,"etag",""),n(null,t)})},listObjectVersions:function(e,n){var t={};t.prefix=e.Prefix||"",t.delimiter=e.Delimiter,t["key-marker"]=e.KeyMarker,t["version-id-marker"]=e.VersionIdMarker,t["max-keys"]=e.MaxKeys,t["encoding-type"]=e.EncodingType,l.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t,action:"versions",tracker:e.tracker},function(e,t){if(e)return n(e);var e=t.ListVersionsResult||{},r=e.DeleteMarker||[],r=S.isArray(r)?r:[r],o=e.Version||[],o=S.isArray(o)?o:[o],e=S.clone(e);delete e.DeleteMarker,delete e.Version,S.extend(e,{DeleteMarkers:r,Versions:o,statusCode:t.statusCode,headers:t.headers}),n(null,e)})},putObject:function(r,o){var n=this,i=r.ContentLength,a=S.throttleOnProgress.call(n,i,r.onProgress),t=r.Headers,e=(t["Cache-Control"]||t["cache-control"]||(t["Cache-Control"]=""),t["Content-Type"]||t["content-type"]||(t["Content-Type"]=r.Body&&r.Body.type||""),r.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5),s=r.tracker;e&&s&&s.setParams({md5StartTime:(new Date).getTime()}),S.getBodyMd5(e,r.Body,function(e){e&&(s&&s.setParams({md5EndTime:(new Date).getTime()}),n.options.UploadCheckContentMd5&&(t["Content-MD5"]=S.b64(e)),r.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(t["x-cos-meta-md5"]=e),void 0!==r.ContentLength&&(t["Content-Length"]=r.ContentLength),a(null,!0),l.call(n,{Action:"name/cos:PutObject",TaskId:r.TaskId,method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,qs:r.Query,body:r.Body,onProgress:a,tracker:s},function(e,t){if(e)return a(null,!0),o(e);a({loaded:i,total:i},!0);e=(e=m({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:r.Bucket,region:n.options.UseAccelerate?"accelerate":r.Region,object:r.Key})).substr(e.indexOf("://")+3);t.Location=e,t.ETag=S.attr(t.headers,"etag",""),o(null,t)})},r.onHashProgress)},deleteObject:function(e,o){l.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(e,t){var r;if(e)return(r=e.statusCode)&&404===r?o(null,{BucketNotFound:!0,statusCode:r}):o(e);o(null,{statusCode:t.statusCode,headers:t.headers})})},getObjectAcl:function(e,n){var t={};e.VersionId&&(t.versionId=e.VersionId),l.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:t,action:"acl",tracker:e.tracker},function(e,t){if(e)return n(e);var e=t.AccessControlPolicy||{},r=e.Owner||{},o=e.AccessControlList&&e.AccessControlList.Grant||[],o=S.isArray(o)?o:[o],e=i(e);delete e.GrantWrite,t.headers&&t.headers["x-cos-acl"]&&(e.ACL=t.headers["x-cos-acl"]),e=S.extend(e,{Owner:r,Grants:o,statusCode:t.statusCode,headers:t.headers}),n(null,e)})},putObjectAcl:function(e,r){var t,o,n=e.Headers,i="";e.AccessControlPolicy&&(o=(t=S.clone(e.AccessControlPolicy||{})).Grants||t.Grant,o=S.isArray(o)?o:[o],delete t.Grant,delete t.Grants,t.AccessControlList={Grant:o},i=S.json2xml({AccessControlPolicy:t}),n["Content-Type"]="application/xml",n["Content-MD5"]=S.b64(S.md5(i))),S.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=a(n[t]))}),l.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:i,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{statusCode:t.statusCode,headers:t.headers})})},optionsObject:function(e,r){var t=e.Headers;t.Origin=e.Origin,t["Access-Control-Request-Method"]=e.AccessControlRequestMethod,t["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,l.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:t,tracker:e.tracker},function(e,t){if(e)return e.statusCode&&403===e.statusCode?r(null,{OptionsForbidden:!0,statusCode:e.statusCode}):r(e);e=t.headers||{};r(null,{AccessControlAllowOrigin:e["access-control-allow-origin"],AccessControlAllowMethods:e["access-control-allow-methods"],AccessControlAllowHeaders:e["access-control-allow-headers"],AccessControlExposeHeaders:e["access-control-expose-headers"],AccessControlMaxAge:e["access-control-max-age"],statusCode:t.statusCode,headers:t.headers})})},putObjectCopy:function(o,n){var e,t,i=this,r=((r=o.Headers)["Cache-Control"]||r["cache-control"]||(r["Cache-Control"]=""),o.CopySource||"");(r=S.getSourceParams.call(this,r))?(e=r.Bucket,t=r.Region,r=decodeURIComponent(r.Key),l.call(this,{Scope:[{action:"name/cos:GetObject",bucket:e,region:t,prefix:r},{action:"name/cos:PutObject",bucket:o.Bucket,region:o.Region,prefix:o.Key}],method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,headers:o.Headers,tracker:o.tracker},function(e,t){if(e)return n(e);var e=S.clone(t.CopyObjectResult||{}),r=m({ForcePathStyle:i.options.ForcePathStyle,protocol:i.options.Protocol,domain:i.options.Domain,bucket:o.Bucket,region:o.Region,object:o.Key,isLocation:!0});S.extend(e,{Location:r,statusCode:t.statusCode,headers:t.headers}),n(null,e)})):n(S.error(new Error("CopySource format error")))},deleteMultipleObject:function(t,n){var e=t.Objects||[],r=t.Quiet,e=S.isArray(e)?e:[e],r=S.json2xml({Delete:{Object:e,Quiet:r||!1}}),o=t.Headers,e=(o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(r)),S.map(e,function(e){return{action:"name/cos:DeleteObject",bucket:t.Bucket,region:t.Region,prefix:e.Key}}));l.call(this,{Scope:e,method:"POST",Bucket:t.Bucket,Region:t.Region,body:r,action:"delete",headers:o,tracker:t.tracker},function(e,t){if(e)return n(e);var e=t.DeleteResult||{},r=e.Deleted||[],o=e.Error||[],r=S.isArray(r)?r:[r],o=S.isArray(o)?o:[o],e=S.clone(e);S.extend(e,{Error:o,Deleted:r,statusCode:t.statusCode,headers:t.headers}),n(null,e)})},restoreObject:function(e,t){var r,o=e.Headers;e.RestoreRequest?(r=e.RestoreRequest||{},r=S.json2xml({RestoreRequest:r}),o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(r)),l.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:r,action:"restore",headers:o,tracker:e.tracker},t)):t(S.error(new Error("missing param RestoreRequest")))},putObjectTagging:function(e,r){var t=(t=e.Tagging||{}).TagSet||t.Tags||e.Tags||[],t=S.clone(S.isArray(t)?t:[t]),t=S.json2xml({Tagging:{TagSet:{Tag:t}}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:t,action:"tagging",headers:o,VersionId:e.VersionId,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},getObjectTagging:function(e,o){l.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(e,t){var r;if(e)404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code?o(e):(r={Tags:[],statusCode:e.statusCode},e.headers&&(r.headers=e.headers),o(null,r));else{e=[];try{e=t.Tagging.TagSet.Tag||[]}catch(e){}e=S.clone(S.isArray(e)?e:[e]),o(null,{Tags:e,statusCode:t.statusCode,headers:t.headers})}})},deleteObjectTagging:function(e,r){l.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})})},selectObjectContent:function(e,r){if(!e.SelectType)return r(S.error(new Error("missing param SelectType")));var t=e.SelectRequest||{},t=S.json2xml({SelectRequest:t}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=S.b64(S.md5(t)),l.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:t,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):(e=S.parseSelectPayload(t.body),void r(null,{statusCode:t.statusCode,headers:t.headers,Body:e.body,Payload:e.payload}))})},appendObject:function(e,r){var t=e.Headers;t["Cache-Control"]||t["cache-control"]||(t["Cache-Control"]=""),t["Content-Type"]||t["content-type"]||(t["Content-Type"]=e.Body&&e.Body.type||""),l.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,t)})},uploadPartCopy:function(e,r){var t,o,n=e.CopySource||"";(n=S.getSourceParams.call(this,n))?(t=n.Bucket,o=n.Region,n=decodeURIComponent(n.Key),l.call(this,{Scope:[{action:"name/cos:GetObject",bucket:t,region:o,prefix:n},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(e,t){if(e)return r(e);e=S.clone(t.CopyPartResult||{});S.extend(e,{statusCode:t.statusCode,headers:t.headers}),r(null,e)})):r(S.error(new Error("CopySource format error")))},multipartInit:function(t,r){var o=this,e=t.Headers,n=t.tracker,i=(e["Cache-Control"]||e["cache-control"]||(e["Cache-Control"]=""),e["Content-Type"]||e["content-type"]||(e["Content-Type"]=t.Body&&t.Body.type||""),t.Body&&(t.UploadAddMetaMd5||o.options.UploadAddMetaMd5));i&&n&&n.setParams({md5StartTime:(new Date).getTime()}),S.getBodyMd5(i,t.Body,function(e){e&&(t.Headers["x-cos-meta-md5"]=e),i&&n&&n.setParams({md5EndTime:(new Date).getTime()}),l.call(o,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:t.Bucket,Region:t.Region,Key:t.Key,action:"uploads",headers:t.Headers,qs:t.Query,tracker:n},function(e,t){return e?(n&&n.parent&&n.parent.setParams({errorNode:"multipartInit"}),r(e)):(t=S.clone(t||{}))&&t.InitiateMultipartUploadResult?r(null,S.extend(t.InitiateMultipartUploadResult,{statusCode:t.statusCode,headers:t.headers})):void r(null,t)})},t.onHashProgress)},multipartUpload:function(o,n){var i=this;S.getFileSize("multipartUpload",o,function(){var r=o.tracker,t=i.options.UploadCheckContentMd5;t&&r&&r.setParams({md5StartTime:(new Date).getTime()}),S.getBodyMd5(t,o.Body,function(e){e&&(o.Headers["Content-MD5"]=S.b64(e)),t&&r&&r.setParams({md5EndTime:(new Date).getTime()}),r&&r.setParams({partNumber:o.PartNumber}),l.call(i,{Action:"name/cos:UploadPart",TaskId:o.TaskId,method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,qs:{partNumber:o.PartNumber,uploadId:o.UploadId},headers:o.Headers,onProgress:o.onProgress,body:o.Body||null,tracker:r},function(e,t){if(e)return r&&r.parent&&r.parent.setParams({errorNode:"multipartUpload"}),n(e);n(null,{ETag:S.attr(t.headers,"etag",""),statusCode:t.statusCode,headers:t.headers})})})})},multipartComplete:function(n,i){for(var a=this,e=n.UploadId,t=n.Parts,s=n.tracker,r=0,o=t.length;r<o;r++)t[r].ETag&&0===t[r].ETag.indexOf('"')||(t[r].ETag='"'+t[r].ETag+'"');var c=(c=S.json2xml({CompleteMultipartUpload:{Part:t}})).replace(/\n\s*/g,""),u=n.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=S.b64(S.md5(c)),l.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,qs:{uploadId:e},body:c,headers:u,tracker:s},function(e,t){if(e)return s&&s.parent&&s.parent.setParams({errorNode:"multipartComplete"}),i(e);var e=m({ForcePathStyle:a.options.ForcePathStyle,protocol:a.options.Protocol,domain:a.options.Domain,bucket:n.Bucket,region:n.Region,object:n.Key,isLocation:!0}),r=t.CompleteMultipartUploadResult||{};if(r.ProcessResults&&(r.UploadResult={OriginalInfo:{Key:r.Key,Location:e,ETag:r.ETag,ImageInfo:r.ImageInfo},ProcessResults:r.ProcessResults},delete r.ImageInfo,delete r.ProcessResults),r.CallbackResult){var o=r.CallbackResult;if("200"===o.Status&&o.CallbackBody)try{r.CallbackBody=JSON.parse(S.decodeBase64(o.CallbackBody))}catch(e){r.CallbackBody={}}else r.CallbackError=o.Error||{};delete r.CallbackResult}if(r.ReturnBodyResult){o=r.ReturnBodyResult;if("200"===o.Status&&o.ReturnBody)try{r.ReturnBody=JSON.parse(S.decodeBase64(o.ReturnBody))}catch(e){r.ReturnBody={}}else r.ReturnError={Code:o.Code,Message:o.Message,Status:o.Status};delete r.ReturnBodyResult}o=S.extend(r,{Location:e,statusCode:t.statusCode,headers:t.headers});i(null,o)})},multipartList:function(e,r){var t={},o=(t.delimiter=e.Delimiter,t["encoding-type"]=e.EncodingType,t.prefix=e.Prefix||"",t["max-uploads"]=e.MaxUploads,t["key-marker"]=e.KeyMarker,t["upload-id-marker"]=e.UploadIdMarker,t=S.clearKey(t),e.tracker);o&&o.setParams({signStartTime:(new Date).getTime()}),l.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t,action:"uploads",tracker:o},function(e,t){if(e)return o&&o.parent&&o.parent.setParams({errorNode:"multipartList"}),r(e);t&&t.ListMultipartUploadsResult&&(e=t.ListMultipartUploadsResult.Upload||[],e=S.isArray(e)?e:[e],t.ListMultipartUploadsResult.Upload=e);e=S.clone(t.ListMultipartUploadsResult||{});S.extend(e,{statusCode:t.statusCode,headers:t.headers}),r(null,e)})},multipartListPart:function(e,o){var t={},n=e.tracker;t.uploadId=e.UploadId,t["encoding-type"]=e.EncodingType,t["max-parts"]=e.MaxParts,t["part-number-marker"]=e.PartNumberMarker,l.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:t,tracker:n},function(e,t){if(e)return n&&n.parent&&n.parent.setParams({errorNode:"multipartListPart"}),o(e);var e=t.ListPartsResult||{},r=e.Part||[],r=S.isArray(r)?r:[r],r=(e.Part=r,S.clone(e));S.extend(r,{statusCode:t.statusCode,headers:t.headers}),o(null,r)})},multipartAbort:function(e,r){var t={};t.uploadId=e.UploadId,l.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:t,tracker:e.tracker},function(e,t){if(e)return r(e);r(null,{statusCode:t.statusCode,headers:t.headers})})},request:function(e,r){l.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(e,t){if(e)return r(e);t&&t.body&&(t.Body=t.body,delete t.body),r(e,t)})},getObjectUrl:function(e,i){var t,r=this,o=(void 0===e.UseAccelerate?r.options:e).UseAccelerate,a=m({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:o?"accelerate":e.Region,object:e.Key}),s="",o=(e.Query&&(s+=S.obj2str(e.Query)),e.QueryString&&(s+=(s?"&":"")+e.QueryString),a);return void 0===e.Sign||e.Sign?(t=n.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:a}),(t=h.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:t,ForceSignHost:!1!==e.ForceSignHost&&r.options.ForceSignHost},function(e,t){var r,o,n;i&&(e?i(e):(r=a,r+="?"+(-1<t.Authorization.indexOf("q-signature")?(e=t.Authorization,o=e.match(/q-url-param-list.*?(?=&)/g)[0],n="q-url-param-list="+encodeURIComponent(o.replace(/q-url-param-list=/,"")).toLowerCase(),o=new RegExp(o,"g"),e.replace(o,n)):"sign="+encodeURIComponent(t.Authorization)),t.SecurityToken&&(r+="&x-cos-security-token="+t.SecurityToken),t.ClientIP&&(r+="&clientIP="+t.ClientIP),t.ClientUA&&(r+="&clientUA="+t.ClientUA),t.Token&&(r+="&token="+t.Token),s&&(r+="&"+s),setTimeout(function(){i(null,{Url:r})})))}))?(o+="?"+t.Authorization+(t.SecurityToken?"&x-cos-security-token="+t.SecurityToken:""),s&&(o+="&"+s)):s&&(o+="?"+s)):(s&&(o+="?"+s),i(null,{Url:o})),o},getAuth:function(e){return S.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}};e.exports.init=function(r,e){e.transferToTaskMethod(s,"putObject"),S.each(s,function(e,t){var n,i,a;r.prototype[t]=S.apiWrapper(t,e),n=t,i=e,a=r.prototype,S.each(["Cors","Acl"],function(e){var t,r,o;n.slice(-e.length)===e&&(t=n.slice(0,-e.length)+e.toUpperCase(),r=S.apiWrapper(n,i),o=!1,a[t]=function(){o||console.warn("warning: cos."+t+" has been deprecated. Please Use cos."+n+" instead."),o=!0,r.apply(this,arguments)})})})}},"./src/cos.js":function(e,t,r){function o(e){if(this.options=n.extend(n.clone(u),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&-1<this.options.SecretId.indexOf(" ")&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&-1<this.options.SecretKey.indexOf(" ")&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),n.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");i.init(this),a.init(this)}var n=r("./src/util.js"),i=r("./src/event.js"),a=r("./src/task.js"),s=r("./src/base.js"),c=r("./src/advance.js"),r=r("./package.json"),u={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null};s.init(o,a),c.init(o,a),o.util={md5:n.md5,xml2json:n.xml2json,json2xml:n.json2xml,encodeBase64:n.encodeBase64},o.getAuthorization=n.getAuth,o.version=r.version,e.exports=o},"./src/event.js":function(e,t){function r(e){function n(e){return t[e]||(t[e]=[]),t[e]}var t={};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),n(e).push(t)},e.off=function(e,t){for(var r=n(e),o=r.length-1;0<=o;o--)t===r[o]&&r.splice(o,1)},e.emit=function(e,t){for(var r=n(e).map(function(e){return e}),o=0;o<r.length;o++)r[o](t)}}e.exports.init=r,e.exports.EventProxy=function(){r(this)}},"./src/session.js":function(e,t,r){function n(){try{s.length?localStorage.setItem(u,JSON.stringify(s)):localStorage.removeItem(u)}catch(e){}}function i(){if(!s){!function(){try{var e=JSON.parse(localStorage.getItem(u))}catch(e){}s=e=e||[]}.call(this);for(var e=!1,t=Math.round(Date.now()/1e3),r=s.length-1;0<=r;r--){var o=s[r][2];(!o||o+2592e3<t)&&(s.splice(r,1),e=!0)}e&&n()}}function a(){o=o||setTimeout(function(){n(),o=null},400)}var s,o,c=r("./src/util.js"),u="cos_sdk_upload_cache",l={using:{},setUsing:function(e){l.using[e]=!0},removeUsing:function(e){delete l.using[e]},getFileId:function(e,t,r,o){return e.name&&e.size&&e.lastModifiedDate&&t?c.md5([e.name,e.size,e.lastModifiedDate,t,r,o].join("::")):null},getCopyFileId:function(e,t,r,o,n){var i=t["content-length"],a=t.etag||"",t=t["last-modified"];return e&&r?c.md5([e,i,a,t,r,o,n].join("::")):null},getUploadIdList:function(e){if(!e)return null;i.call(this);for(var t=[],r=0;r<s.length;r++)s[r][0]===e&&t.push(s[r][1]);return t.length?t:null},saveUploadId:function(e,t,r){if(i.call(this),e){for(var o=s.length-1;0<=o;o--){var n=s[o];n[0]===e&&n[1]===t&&s.splice(o,1)}s.unshift([e,t,Math.round(Date.now()/1e3)]),s.length>r&&s.splice(r),a()}},removeUploadId:function(e){i.call(this),delete l.using[e];for(var t=s.length-1;0<=t;t--)s[t][1]===e&&s.splice(t,1);a()}};e.exports=l},"./src/task.js":function(e,t,r){var s=r("./src/session.js"),g=r("./src/util.js"),i={};e.exports.transferToTaskMethod=function(e,r){i[r]=e[r],e[r]=function(e,t){e.SkipTask?i[r].call(this,e,t):this._addTask(r,e,t)}},e.exports.init=function(c){var e,u=[],l={},a=0,o=0,t=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},d=function(){e=e||setTimeout(r)};function r(){e=0,c.emit("task-list-update",{list:g.map(u,t)}),c.emit("list-update",{list:g.map(u,t)})}function p(){if(!(u.length<=c.options.UploadQueueSize)){for(var e=0;e<o&&e<u.length&&u.length>c.options.UploadQueueSize;){var t="waiting"===u[e].state||"checking"===u[e].state||"uploading"===u[e].state;u[e]&&t?e++:(l[u[e].id]&&delete l[u[e].id],u.splice(e,1),o--)}d()}}function h(){if(!(a>=c.options.FileParallelLimit)){for(;u[o]&&"waiting"!==u[o].state;)o++;var r,e;o>=u.length||(r=u[o],o++,a++,r.state="checking",r.params.onTaskStart&&r.params.onTaskStart(t(r)),r.params.UploadData||(r.params.UploadData={}),e=g.formatParams(r.api,r.params),i[r.api].call(c,e,function(e,t){c._isRunningTask(r.id)&&("checking"!==r.state&&"uploading"!==r.state||(r.state=e?"error":"success",e&&(r.error=e),a--,d(),h(),r.callback&&r.callback(e,t),"success"===r.state&&(r.params&&(delete r.params.UploadData,delete r.params.Body,delete r.params),delete r.callback)),p())}),d(),setTimeout(h))}}function n(e,t){var r=l[e];if(r){var o=r&&"waiting"===r.state,n=r&&("checking"===r.state||"uploading"===r.state);if("canceled"===t&&"canceled"!==r.state||"paused"===t&&o||"paused"===t&&n){r.state=t,c.emit("inner-kill-task",{TaskId:e,toState:t});try{var i=r&&r.params&&r.params.UploadData.UploadId}catch(e){}"canceled"===t&&i&&s.removeUsing(i),d(),n&&(a--,h()),"canceled"===t&&(r.params&&(delete r.params.UploadData,delete r.params.Body,delete r.params),delete r.callback)}p()}}c._addTasks=function(e){g.each(e,function(e){c._addTask(e.api,e.params,e.callback,!0)}),d()};var f=!0;c._addTask=function(e,t,r,o){t=g.formatParams(e,t);var n=g.uuid(),i=(t.TaskId=n,t.onTaskReady&&t.onTaskReady(n),t.TaskReady&&(t.TaskReady(n),f&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),f=!1),{params:t,callback:r,api:e,index:u.length,id:n,Bucket:t.Bucket,Region:t.Region,Key:t.Key,FilePath:t.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:t._custom}),a=t.onHashProgress,s=(t.onHashProgress=function(e){c._isRunningTask(i.id)&&(i.hashPercent=e.percent,a&&a(e),d())},t.onProgress);return t.onProgress=function(e){c._isRunningTask(i.id)&&("checking"===i.state&&(i.state="uploading"),i.loaded=e.loaded,i.speed=e.speed,i.percent=e.percent,s&&s(e),d())},g.getFileSize(e,t,function(e,t){if(e)return r(g.error(e));l[n]=i,u.push(i),i.size=t,o||d(),h(),p()}),n},c._isRunningTask=function(e){e=l[e];return!(!e||"checking"!==e.state&&"uploading"!==e.state)},c.getTaskList=function(){return g.map(u,t)},c.cancelTask=function(e){n(e,"canceled")},c.pauseTask=function(e){n(e,"paused")},c.restartTask=function(e){e=l[e];!e||"paused"!==e.state&&"error"!==e.state||(e.state="waiting",d(),o=Math.min(o,e.index),h())},c.isUploadRunning=function(){return a||o<u.length}}},"./src/tracker.js":function(e,t,r){function g(e){return!e||e<0?0:(e/1e3).toFixed(3)}var y=r("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/createClass.js"),n=r("./node_modules/@babel/runtime/helpers/typeof.js"),k=r("./package.json"),C=null,v=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},b=function(){var e;return"object"===("undefined"==typeof navigator?"undefined":n(navigator))&&((null==(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection)?void 0:e.type)||(null==e?void 0:e.effectiveType))||"unknown"},r=function(){return"object"===("undefined"==typeof location?"undefined":n(location))?location.protocol.replace(/:/,""):"unknown protocol"},i=function(){var e,t;return"object"!==("undefined"==typeof navigator?"undefined":n(navigator))?"unknown os":(e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent),0<=e.indexOf("win32")||0<=e.indexOf("wow32")?"win32":0<=e.indexOf("win64")||0<=e.indexOf("wow64")?"win64":t?"mac":"unknown os")},a=function(){return!("object"!==("undefined"==typeof navigator?"undefined":n(navigator))||!navigator.userAgent.match(/(Android|Adr|Linux)/i))},s=function(){return!("object"!==("undefined"==typeof navigator?"undefined":n(navigator))||!navigator.userAgent.match(/(iPhone|iPod|iPad|iOS)/i))},c=function(){return"object"!==("undefined"==typeof navigator?"undefined":n(navigator))?"unknown device":navigator.userAgent},u=function(){return!("object"!==("undefined"==typeof navigator?"undefined":n(navigator))||!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))}(),a=a()?"android":s?"ios":"other_mobile",s=i(),S=u?a:s,x=c(),T=r();i=function(){function m(e){y(this,m);var t=e.parent,r=e.traceId,o=e.bucket,n=e.region,i=e.apiName,a=e.realApi,s=e.httpMethod,c=e.fileKey,u=e.fileSize,l=e.accelerate,d=e.customId,p=e.delay,h=e.deepTracker,f=e.Beacon,e=e.clsReporter,g=o&&o.substr(o.lastIndexOf("-")+1)||"";this.parent=t,this.deepTracker=h,this.delay=p,e&&!this.clsReporter&&(this.clsReporter=e),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:k.version,osName:S,networkType:"",requestName:i||"",requestResult:"",realApi:a,bucket:o,region:n,accelerate:l,httpMethod:s,url:"",host:"",httpDomain:"",requestPath:c||"",userAgent:x,networkProtocol:T,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:u||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:(new Date).getTime(),endTime:0,traceId:r||v(),appid:g,partNumber:0,httpRetryTimes:0,customId:d||"",partTime:0},f&&(this.beacon=function(e,t){if(!C){if("function"!=typeof e)throw new Error("Beacon not found");C=new e({appkey:"0WEB05PY6MHRGK0U",versionCode:k.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:t,sessionDuration:6e4})}return C}(f,p))}return o(m,[{key:"formatResult",value:function(e,t){var r,o,n=(new Date).getTime(),i=b(),a=e?(null==e?void 0:e.code)||(null==e||null==(a=e.error)?void 0:a.code)||(null==e||null==(a=e.error)?void 0:a.Code):"",s=e?(null==e?void 0:e.message)||(null==e||null==(s=e.error)?void 0:s.message)||(null==e||null==(s=e.error)?void 0:s.Message):"",c=s,u=e?(null==e?void 0:e.resource)||(null==e||null==(u=e.error)?void 0:u.resource)||(null==e||null==(u=e.error)?void 0:u.Resource):"",l=e?null==e?void 0:e.statusCode:t.statusCode,d=e?(null==e?void 0:e.headers)&&(null==e?void 0:e.headers["x-cos-request-id"]):(null==t?void 0:t.headers)&&(null==t?void 0:t.headers["x-cos-request-id"]),p=e?d?"Server":"Client":"",t=("getObject"===this.params.requestName&&(this.params.httpSize=t?t.headers&&t.headers["content-length"]:0),"sliceUploadFile"===this.params.realApi),h="sliceCopyFile"===this.params.realApi;if(t||h?(t=this.params.httpSize/1024/this.params.partTime,Object.assign(this.params,{httpSpeed:t<0?0:t.toFixed(3)})):(h=n-this.params.startTime,t=this.params.httpEndTime-this.params.httpStartTime,n=this.params.httpSize/1024/(t/1e3),r=this.params.md5EndTime-this.params.md5StartTime,o=this.params.signEndTime-this.params.signStartTime,this.parent&&(this.parent.addParamValue("httpTookTime",g(t)),this.parent.addParamValue("httpFullTime",g(h)),this.parent.addParamValue("httpMd5",g(r)),this.parent.addParamValue("httpSign",g(o)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName))&&this.parent.addParamValue("partTime",g(t)),Object.assign(this.params,{httpFullTime:g(h),httpMd5:g(r),httpSign:g(o),httpTookTime:g(t),httpSpeed:n<0?0:n.toFixed(3)})),Object.assign(this.params,{networkType:i,requestResult:e?"Failure":"Success",errorType:p,errorCode:a,errorHttpCode:l,errorName:c,errorMessage:s,errorServiceName:u,errorRequestId:d}),!e||a&&s||(this.params.fullError=e?JSON.stringify(e):""),this.params.url){try{var f=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=f[2]}catch(e){this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(e,t){(this.beacon||this.clsReporter)&&(this.formatResult(e,t),e=function(e){var t,r={},o=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],n=[].concat(o,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),i="Success"===e.requestResult?o:n;for(t in e)i.includes(t)&&(r[t.replace(/([A-Z])/g,"_$1").toLowerCase()]=e[t]);return r.request_name=e.realApi?(o=e.realApi,["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(o)?"UploadTask":"getObject"===o?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(o)?"CopyTask":o):e.requestName,r}(this.params),this.beacon&&this.sendEventsToBeacon(e),this.clsReporter)&&this.sendEventsToCLS(e)}},{key:"setParams",value:function(e){Object.assign(this.params,e)}},{key:"addParamValue",value:function(e,t){this.params[e]=(+this.params[e]+ +t).toFixed(3)}},{key:"sendEventsToBeacon",value:function(e){var t;("sliceUploadFile"!==this.params.requestName&&"sliceUploadFile"!==this.params.realApi||this.deepTracker)&&(t="qcloud_track_cos_sdk",0===this.delay?this.beacon&&this.beacon.onDirectUserAction(t,e):this.beacon&&this.beacon.onUserAction(t,e))}},{key:"sendEventsToCLS",value:function(e){var t=!(0!==this.delay);this.clsReporter.log(e,t)}},{key:"generateSubTracker",value:function(e){return Object.assign(e,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new m(e)}}]),m}();e.exports=i},"./src/util.js":function(O,e,I){!function(e){var n=I("./node_modules/@babel/runtime/helpers/typeof.js");function i(e,t){var r,o,n,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return n=!(o=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var r=I("./lib/md5.js"),l=I("./lib/crypto.js"),t=I("./node_modules/fast-xml-parser/src/fxp.js"),o=t.XMLParser,t=t.XMLBuilder,a=new o({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1}),c=new t,u=I("./lib/base64.js"),d=I("./src/tracker.js");function p(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function h(e,t){var r,o=[];for(r in e)e.hasOwnProperty(r)&&o.push(t?p(r).toLowerCase():r);return o.sort(function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:t<e?1:-1})}function g(e,t,r){return e=e.slice(r,r+t/8),new Uint8Array(e).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[t](e)[0]}function m(e,t,r,o){var e=e.slice(t,r),n="";return new Uint8Array(e).forEach(function(e){n+=String.fromCharCode(e)}),n=o?decodeURIComponent(escape(n)):n}function f(){}function y(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&null!==e[t]&&(r[t]=e[t]);return r}function k(e,a){var t,r=new FileReader;FileReader.prototype.readAsBinaryString?(t=FileReader.prototype.readAsBinaryString,r.onload=function(){a(this.result)}):FileReader.prototype.readAsArrayBuffer?t=function(e){var n="",i=new FileReader;i.onload=function(e){for(var t=new Uint8Array(i.result),r=t.byteLength,o=0;o<r;o++)n+=String.fromCharCode(t[o]);a(n)},i.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),t.call(r,e)}var C=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],v=(o="undefined"!=typeof navigator&&navigator.userAgent)&&(t=(o.match(/Chrome\/([.\d]+)/)||[])[1],E=(o.match(/QBCore\/([.\d]+)/)||[])[1],o=(o.match(/QQBrowser\/([.\d]+)/)||[])[1],t)&&b(t,"53.0.2785.116")<0&&E&&b(E,"3.53.991.400")<0&&o&&b(o,"9.0.2524.400")<=0||!1;function b(e,t){e=e.split("."),t=t.split(".");for(var r=0;r<t.length;r++)if(e[r]!==t[r])return parseInt(e[r])>parseInt(t[r])?1:-1;return 0}function S(e){return B(e,function(e){return"object"===n(e)&&null!==e?S(e):e})}function x(r,o){return R(o,function(e,t){r[t]=o[t]}),r}function T(e){return e instanceof Array}function R(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function B(e,t){var r,o=T(e)?[]:{};for(r in e)e.hasOwnProperty(r)&&(o[r]=t(e[r],r));return o}function A(e,r){if(r=x({},r),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var o=r.Headers||{};if(r&&"object"===n(r)){for(var t in r)r.hasOwnProperty(t)&&-1<t.indexOf("x-cos-")&&(o[t]=r[t]);w.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"},function(e,t){void 0!==r[e]&&(o[t]=r[e])}),r.Headers=y(o)}}return r}function P(e){return Date.now()+(e||0)}var t="object"===("undefined"==typeof navigator?"undefined":n(navigator))&&!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),E="object"===("undefined"==typeof navigator?"undefined":n(navigator))&&/\sQQ/i.test(navigator.userAgent),w={noop:f,formatParams:A,apiWrapper:function(u,l){return function(t,n){function e(e,t){r&&r.report(e,t),n&&n(a(e),a(t))}var r,o,i=this,a=("function"==typeof t&&(n=t,t={}),t=A(u,t),i.options.EnableReporter&&(r="sliceUploadFile"===t.calledBySdk||"sliceCopyFile"===t.calledBySdk?t.tracker&&t.tracker.generateSubTracker({apiName:u}):["uploadFile","uploadFiles"].includes(u)?null:(o=0,t.Body&&(o="string"==typeof t.Body?t.Body.length:t.Body.size||t.Body.byteLength||0),c=i.options.UseAccelerate||"string"==typeof i.options.Domain&&i.options.Domain.includes("accelerate."),new d({Beacon:i.options.BeaconReporter,clsReporter:i.options.ClsReporter,bucket:t.Bucket,region:t.Region,apiName:u,realApi:u,accelerate:c,fileKey:t.Key,fileSize:o,deepTracker:i.options.DeepTracker,customId:i.options.CustomId,delay:i.options.TrackerDelay}))),t.tracker=r,function(e){return e&&e.headers&&(e.headers["x-cos-request-id"]&&(e.RequestId=e.headers["x-cos-request-id"]),e.headers["x-ci-request-id"]&&(e.RequestId=e.headers["x-ci-request-id"]),e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"])&&(e.DeleteMarker=e.headers["x-cos-delete-marker"]),e}),s=function(){if("getService"!==u&&"abortUploadTask"!==u){var e=function(e,t){var r=t.Bucket,o=t.Region,t=t.Key,n=this.options.Domain,i=!n||"string"==typeof n&&-1<n.indexOf("{Bucket}"),n=!n||"string"==typeof n&&-1<n.indexOf("{Region}");if(-1<e.indexOf("Bucket")||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(i&&!r)return"Bucket";if(n&&!o)return"Region"}else if(-1<e.indexOf("Object")||-1<e.indexOf("multipart")||"sliceUploadFile"===e||"abortUploadTask"===e||"uploadFile"===e){if(i&&!r)return"Bucket";if(n&&!o)return"Region";if(!t)return"Key"}return!1}.call(i,u,t);if(e)return"missing param "+e;if(t.Region){if(i.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(t.Region))return"Region format error."}else{if(-1<t.Region.indexOf("cos."))return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(t.Region))return"Region format error."}i.options.CompatibilityMode||-1!==t.Region.indexOf("-")||"yfb"===t.Region||"default"===t.Region||"accelerate"===t.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(t.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(t.Bucket))if(t.AppId)t.Bucket=t.Bucket+"-"+t.AppId;else{if(!i.options.AppId)return'Bucket should format as "test-1250000000".';t.Bucket=t.Bucket+"-"+i.options.AppId}t.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete t.AppId)}!i.options.UseRawKey&&t.Key&&"/"===t.Key.substr(0,1)&&(t.Key=t.Key.substr(1))}}(),c=["getAuth","getObjectUrl"].includes(u);return"function"!=typeof Promise||c||n?s?e(w.error(new Error(s))):(o=l.call(i,t,e),c?o:void 0):new Promise(function(r,o){if(n=function(e,t){e?o(e):r(t)},s)return e(w.error(new Error(s)));l.call(i,t,e)})}},xml2json:function(e){return a.parse(e)},json2xml:function(e){return c.build(e)},md5:r,clearKey:y,fileSlice:function(e,t,r,o,n){var i,a;e.slice?i=e.slice(t,r):e.mozSlice?i=e.mozSlice(t,r):e.webkitSlice&&(i=e.webkitSlice(t,r)),o&&v?((a=new FileReader).onload=function(e){i=null,n(new Blob([a.result]))},a.readAsArrayBuffer(i)):n(i)},getBodyMd5:function(e,t,r,o){r=r||f,e?"string"==typeof t?r(w.md5(t,!0)):Blob&&t instanceof Blob?w.getFileMd5(t,function(e,t){r(t)},o):r():r()},getFileMd5:function(t,n,i){var a=t.size,s=0,c=r.getCtx();(function r(o){var e;a<=o?(e=c.digest("hex"),n(null,e)):(e=Math.min(a,o+1048576),w.fileSlice(t,o,e,!1,function(t){k(t,function(e){t=null,c=c.update(e,!0),s+=e.length,e=null,i&&i({loaded:s,total:a,percent:Math.round(s/a*1e4)/1e4}),r(o+1048576)})}))})(0)},b64:function(e){for(var t,r="",o=0,n=e.length/2;o<n;o++)t=parseInt(e[2*o]+e[2*o+1],16),r+=String.fromCharCode(t);return btoa(r)},extend:x,isArray:T,isInArray:function(e,t){for(var r=!1,o=0;o<e.length;o++)if(t===e[o]){r=!0;break}return r},makeArray:function(e){return T(e)?e:[e]},each:R,map:B,filter:function(e,t){var r,o=T(e),n=o?[]:{};for(r in e)e.hasOwnProperty(r)&&t(e[r],r)&&(o?n.push(e[r]):n[r]=e[r]);return n},clone:S,attr:function(e,t,r){return e&&t in e?e[t]:r},uuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},camSafeUrlEncode:p,throttleOnProgress:function(r,o){var n,i,a=this,s=0,c=0,u=Date.now();function l(){if(i=0,o&&"function"==typeof o){n=Date.now();var e=Math.max(0,Math.round((c-s)/((n-u)/1e3)*100)/100)||0,t=0===c&&0===r?1:Math.floor(c/r*100)/100||0;u=n,s=c;try{o({loaded:c,total:r,speed:e,percent:t})}catch(e){}}}return function(e,t){e&&(c=e.loaded,r=e.total),t?(clearTimeout(i),l()):i=i||setTimeout(l,a.options.ProgressInterval)}},getFileSize:function(e,t,r){var o;"string"==typeof t.Body?t.Body=new Blob([t.Body],{type:"text/plain"}):t.Body instanceof ArrayBuffer&&(t.Body=new Blob([t.Body])),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(o=t.Body.size,r(null,t.ContentLength=o)):r(w.error(new Error("params body format error, Only allow File|Blob|String.")))},getSkewTime:P,error:function(e,t){var r=e;return e.message=e.message||null,"string"==typeof t?(e.error=t,e.message=t):"object"===n(t)&&null!==t&&(x(e,t),(t.code||t.name)&&(e.code=t.code||t.name),t.message&&(e.message=t.message),t.stack)&&(e.stack=t.stack),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=t&&t.name||e.name||e.code||"Error",e.code||(e.code=e.name),e.error||(e.error=S(r)),e},obj2str:function(e,t){for(var r,o,n=[],i=h(e),a=0;a<i.length;a++)o=void 0===e[r=i[a]]||null===e[r]?"":""+e[r],r=t?p(r).toLowerCase():p(r),o=p(o)||"",n.push(r+"="+o);return n.join("&")},getAuth:function(e){var t,r,o=(e=e||{}).SecretId,n=e.SecretKey,i=e.KeyTime,a=(e.method||e.Method||"get").toLowerCase(),s=S(e.Query||e.params||{}),c=function(e){var t,r={};for(t in e){var o=t.toLowerCase();(-1<o.indexOf("x-cos-")||-1<C.indexOf(o))&&(r[t]=e[t])}return r}(S(e.Headers||e.headers||{})),u=e.Key||"",u=(e.UseRawKey?r=e.Pathname||e.pathname||"/"+u:0!==(r=e.Pathname||e.pathname||u).indexOf("/")&&(r="/"+r),!1!==e.ForceSignHost);if(!c.Host&&!c.host&&e.Bucket&&e.Region&&u&&(c.Host=e.Bucket+".cos."+e.Region+".myqcloud.com"),!o)throw new Error("missing param SecretId");if(n)return t=u=Math.round(P(e.SystemClockOffset)/1e3)-1,t+=void 0===(e=e.Expires||e.expires)?900:+e||0,e=o,i=o=i||u+";"+t,u=h(c,!0).join(";").toLowerCase(),t=h(s,!0).join(";").toLowerCase(),n=l.HmacSHA1(i,n).toString(),a=[a,r,w.obj2str(s,!0),w.obj2str(c,!0),""].join("\n"),r=["sha1",o,l.SHA1(a).toString(),""].join("\n"),["q-sign-algorithm=sha1","q-ak="+e,"q-sign-time="+o,"q-key-time="+i,"q-header-list="+u,"q-url-param-list="+t,"q-signature="+l.HmacSHA1(r,n).toString()].join("&");throw new Error("missing param SecretKey")},parseSelectPayload:function(e){for(var t={},r=m(e),o={records:[]};e.byteLength;){var n,i,a,s,c=g(e,32,0),u=g(e,32,4),c=c-u-16,l=0;for(e=e.slice(12);l<u;){var d=g(e,8,l),p=m(e,l+1,l+1+d),h=g(e,16,l+d+2),f=m(e,l+d+4,l+d+4+h);t[p]=f,l+=d+4+h}"Records"===t[":event-type"]?(n=m(e,l,l+c,!0),o.records.push(n)):"Stats"===t[":event-type"]?(n=m(e,l,l+c,!0),o.stats=w.xml2json(n).Stats):"error"===t[":event-type"]?(i=t[":error-code"],a=t[":error-message"],(s=new Error(a)).message=a,s.name=s.code=i,o.error=s):["Progress","Continuation","End"].includes(t[":event-type"]),e=e.slice(l+c+4)}return{payload:o.records.join(""),body:r}},getSourceParams:function(e){var t=this.options.CopySourceParser;return t?t(e):(t=e.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/))?{Bucket:t[1],Region:t[3],Key:t[7]}:null},isBrowser:!0,isNode:function(){return"object"!==("undefined"==typeof window?"undefined":n(window))&&"object"===(void 0===e?"undefined":n(e))&&!("object"===("undefined"==typeof globalThis?"undefined":n(globalThis))&&("DedicatedWorkerGlobalScope"===globalThis.constructor.name||globalThis.FileReaderSync))},isCIHost:function(e){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(e)},isIOS_QQ:t&&E,encodeBase64:function(e,t){e=u.encode(e);return e=t?e.replaceAll("+","-").replaceAll("/","_").replaceAll("=",""):e},decodeBase64:function(e){return e?u.decode(e):""},simplifyPath:function(e){var t,r=[],o=i(e.split("/"));try{for(o.s();!(t=o.n()).done;){var n=t.value;".."===n?r.length&&r.pop():n.length&&"."!==n&&r.push(n)}}catch(e){o.e(e)}finally{o.f()}return"/"+r.join("/")},readAsBinaryString:k,parseResBody:function(t){if(t&&"string"==typeof t){var e=t.trim(),r=0===e.indexOf("<"),e=0===e.indexOf("{");if(r)i=w.xml2json(t)||{};else if(e)try{var o=t.replace(/\n/g," "),n=JSON.parse(o),i="[object Object]"===Object.prototype.toString.call(n)?n:t}catch(e){i=t}else i=t}else i=t||{};return i}};O.exports=w}.call(this,I("./node_modules/process/browser.js"))}},o={},n.m=r,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./index.js");function n(e){var t;return(o[e]||(t=o[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var r,o});"use strict";!function(n){n.cosMsg={url:"",Bucket:"",Region:"",cos:new COS({getAuthorization:function(e,i){var t=new XMLHttpRequest;t.open("GET",n.cosMsg.url,!0),t.setRequestHeader("token","cocos"),t.setRequestHeader("Content-Type","application/json"),t.onload=function(e){try{var t=JSON.parse(e.target.responseText)}catch(e){}i({TmpSecretId:t.data.credentials.tmpSecretId,TmpSecretKey:t.data.credentials.tmpSecretKey,SecurityToken:t.data.credentials.sessionToken,StartTime:t.data.startTime,ExpiredTime:t.data.expiredTime,ScopeLimit:!0})},t.send(JSON.stringify(e.Scope))}}),setCosData:function(e){this.url=e.url,this.Bucket=e.bucket,this.Region=e.region},uploadFiles:function(e,i){this.url&&this.cos.uploadFiles({files:e,SliceSize:1048576,onProgress:function(e){},onFileFinish:function(e,t,i){}},function(e,t){console.log(e||t),i(e,t)})}}}("undefined"==typeof window?global:window);