(function(k,p){"object"===typeof exports&&"undefined"!==typeof module?p(exports):"function"===typeof define&&define.amd?define(["exports"],p):p(k.WHATWGFetch={})})(this,function(k){function p(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(a)||""===a)throw new TypeError('Invalid character in header field name: "'+a+'"');return a.toLowerCase()}function v(a){"string"!==typeof a&&(a=String(a));return a}function w(a){var b={next:function(){var c=a.shift();return{done:void 0===
    c,value:c}}};l.iterable&&(b[Symbol.iterator]=function(){return b});return b}function f(a){this.map={};a instanceof f?a.forEach(function(b,c){this.append(c,b)},this):Array.isArray(a)?a.forEach(function(b){if(2!=b.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function x(a){if(!a._noBody){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));
    a.bodyUsed=!0}}function z(a){return new Promise(function(b,c){a.onload=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function D(a){var b=new FileReader,c=z(b);b.readAsArrayBuffer(a);return c}function A(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function B(){this.bodyUsed=!1;this._initBody=function(a){this.bodyUsed=this.bodyUsed;(this._bodyInit=a)?"string"===typeof a?this._bodyText=a:l.blob&&Blob.prototype.isPrototypeOf(a)?
    this._bodyBlob=a:l.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():l.arrayBuffer&&l.blob&&a&&DataView.prototype.isPrototypeOf(a)?(this._bodyArrayBuffer=A(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||E(a))?this._bodyArrayBuffer=A(a):this._bodyText=a=Object.prototype.toString.call(a):(this._noBody=!0,this._bodyText="");this.headers.get("content-type")||
    ("string"===typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))};l.blob&&(this.blob=function(){var a=x(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));
    if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))});this.arrayBuffer=function(){if(this._bodyArrayBuffer){var a=x(this);return a?a:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}if(l.blob)return this.blob().then(D);throw Error("could not read as ArrayBuffer");
    };this.text=function(){var a=x(this);if(a)return a;if(this._bodyBlob){a=this._bodyBlob;var b=new FileReader,c=z(b),e=/charset=([A-Za-z0-9_-]+)/.exec(a.type);b.readAsText(a,e?e[1]:"utf-8");return c}if(this._bodyArrayBuffer){a=Promise;b=a.resolve;c=new Uint8Array(this._bodyArrayBuffer);e=Array(c.length);for(var q=0;q<c.length;q++)e[q]=String.fromCharCode(c[q]);c=e.join("");return b.call(a,c)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)};
    l.formData&&(this.formData=function(){return this.text().then(F)});this.json=function(){return this.text().then(JSON.parse)};return this}function r(a,b){if(!(this instanceof r))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var c=b.body;if(a instanceof r){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new f(a.headers));this.method=a.method;this.mode=
    a.mode;this.signal=a.signal;c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);this.credentials=b.credentials||this.credentials||"same-origin";if(b.headers||!this.headers)this.headers=new f(b.headers);a=b.method||this.method||"GET";var e=a.toUpperCase();this.method=-1<G.indexOf(e)?e:a;this.mode=b.mode||this.mode||null;(a=b.signal||this.signal)||(a="AbortController"in h?(new AbortController).signal:void 0);this.signal=a;this.referrer=null;if(("GET"===this.method||"HEAD"===
    this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c);if("GET"===this.method||"HEAD"===this.method)if("no-store"===b.cache||"no-cache"===b.cache)b=/([?&])_=[^&]*/,b.test(this.url)?this.url=this.url.replace(b,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}function F(a){var b=new FormData;a.trim().split("&").forEach(function(c){if(c){var e=c.split("=");c=e.shift().replace(/\+/g," ");e=e.join("=").replace(/\+/g,
    " ");b.append(decodeURIComponent(c),decodeURIComponent(e))}});return b}function H(a){var b=new f;a.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(c){return 0===c.indexOf("\n")?c.substr(1,c.length):c}).forEach(function(c){var e=c.split(":");if(c=e.shift().trim()){e=e.join(":").trim();try{b.append(c,e)}catch(q){console.warn("Response "+q.message)}}});return b}function n(a,b){if(!(this instanceof n))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
    b||(b={});this.type="default";this.status=void 0===b.status?200:b.status;if(200>this.status||599<this.status)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=200<=this.status&&300>this.status;this.statusText=void 0===b.statusText?"":""+b.statusText;this.headers=new f(b.headers);this.url=b.url||"";this._initBody(a)}function y(a,b){return new Promise(function(c,e){function q(){d.abort()}var m=new r(a,b);if(m.signal&&m.signal.aborted)return e(new k.DOMException("Aborted",
    "AbortError"));var d=new XMLHttpRequest;d.onload=function(){var g={statusText:d.statusText,headers:H(d.getAllResponseHeaders()||"")};0===m.url.indexOf("file://")&&(200>d.status||599<d.status)?g.status=200:g.status=d.status;g.url="responseURL"in d?d.responseURL:g.headers.get("X-Request-URL");var t="response"in d?d.response:d.responseText;setTimeout(function(){c(new n(t,g))},0)};d.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)};d.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request timed out"))},
    0)};d.onabort=function(){setTimeout(function(){e(new k.DOMException("Aborted","AbortError"))},0)};d.open(m.method,function(g){try{return""===g&&h.location.href?h.location.href:g}catch(t){return g}}(m.url),!0);"include"===m.credentials?d.withCredentials=!0:"omit"===m.credentials&&(d.withCredentials=!1);"responseType"in d&&(l.blob?d.responseType="blob":l.arrayBuffer&&(d.responseType="arraybuffer"));if(!b||"object"!==typeof b.headers||b.headers instanceof f||h.Headers&&b.headers instanceof h.Headers)m.headers.forEach(function(g,
    t){d.setRequestHeader(t,g)});else{var C=[];Object.getOwnPropertyNames(b.headers).forEach(function(g){C.push(p(g));d.setRequestHeader(g,v(b.headers[g]))});m.headers.forEach(function(g,t){-1===C.indexOf(t)&&d.setRequestHeader(t,g)})}m.signal&&(m.signal.addEventListener("abort",q),d.onreadystatechange=function(){4===d.readyState&&m.signal.removeEventListener("abort",q)});d.send("undefined"===typeof m._bodyInit?null:m._bodyInit)})}var h="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&
    self||"undefined"!==typeof global&&global||{},I="Symbol"in h&&"iterator"in Symbol,u;if(u="FileReader"in h&&"Blob"in h)try{new Blob,u=!0}catch(a){u=!1}var l={searchParams:"URLSearchParams"in h,iterable:I,blob:u,formData:"FormData"in h,arrayBuffer:"ArrayBuffer"in h};if(l.arrayBuffer)var J="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";"),E=ArrayBuffer.isView||
    function(a){return a&&-1<J.indexOf(Object.prototype.toString.call(a))};f.prototype.append=function(a,b){a=p(a);b=v(b);var c=this.map[a];this.map[a]=c?c+", "+b:b};f.prototype["delete"]=function(a){delete this.map[p(a)]};f.prototype.get=function(a){a=p(a);return this.has(a)?this.map[a]:null};f.prototype.has=function(a){return this.map.hasOwnProperty(p(a))};f.prototype.set=function(a,b){this.map[p(a)]=v(b)};f.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,
    this.map[c],c,this)};f.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return w(a)};f.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return w(a)};f.prototype.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return w(a)};l.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var G="CONNECT DELETE GET HEAD OPTIONS PATCH POST PUT TRACE".split(" ");r.prototype.clone=function(){return new r(this,{body:this._bodyInit})};
    B.call(r.prototype);B.call(n.prototype);n.prototype.clone=function(){return new n(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})};n.error=function(){var a=new n(null,{status:200,statusText:""});a.ok=!1;a.status=0;a.type="error";return a};var K=[301,302,303,307,308];n.redirect=function(a,b){if(-1===K.indexOf(b))throw new RangeError("Invalid status code");return new n(null,{status:b,headers:{location:a}})};k.DOMException=h.DOMException;try{new k.DOMException}catch(a){k.DOMException=
    function(b,c){this.message=b;this.name=c;this.stack=Error(b).stack},k.DOMException.prototype=Object.create(Error.prototype),k.DOMException.prototype.constructor=k.DOMException}y.polyfill=!0;h.fetch=y;h.Headers=f;h.Request=r;h.Response=n;k.Headers=f;k.Request=r;k.Response=n;k.fetch=y;Object.defineProperty(k,"__esModule",{value:!0})});